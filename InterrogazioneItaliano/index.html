<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Letteratura Italiana: Guida allo Studio - Template</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap');

        :root {
            /* --- COLORI & TEMA --- */
            
            /* LIGHT MODE */
            --bg-light: #f5f5f4;  
            --text-light: #292524; 
            --text-light-secondary: #57534e; 
            --card-bg-light: #ffffff;
            --card-border-light: #e7e5e4; 
            --accent-light: #b91c1c; /* Rosso scuro per richiamare la passione/verismo */
            --shadow-light: 0 4px 20px -2px rgba(28, 25, 23, 0.06);
            --focus-ring-light: #ef4444;
            --highlight-light: #fee2e2; 
            
            /* Card Back Colors - Light */
            --flip-front-bg-light: #fafaf9; 
            --flip-back-bg-light: #e7e5e4; 
            --flip-back-text-light: #292524;

            /* Quiz Explanation Colors - Light */
            --quiz-expl-bg-light: #f0fdf4;
            --quiz-expl-border-light: #bbf7d0;
            --quiz-expl-text-light: #14532d;

            /* DARK MODE */
            --bg-dark: #1c1917; 
            --text-dark: #e7e5e4; 
            --text-dark-secondary: #a8a29e; 
            --card-bg-dark: #292524; 
            --card-border-dark: #44403c; 
            --accent-dark: #f87171; 
            --shadow-dark: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
            --focus-ring-dark: #fca5a5;
            
            /* Card Back Colors - Dark */
            --flip-front-bg-dark: #0f0e0d; 
            --flip-back-bg-dark: #292524; 
            --flip-back-text-dark: #e7e5e4;

            /* Quiz Explanation Colors - Dark */
            --quiz-expl-bg-dark: #14532d;
            --quiz-expl-border-dark: #15803d;
            --quiz-expl-text-dark: #f0fdf4;
        }

        [data-theme="light"] {
            --bg-color: var(--bg-light); --text-color: var(--text-light); --text-secondary-color: var(--text-light-secondary); 
            --card-bg-color: var(--card-bg-light); --accent-color: var(--accent-light);
            --border-color: var(--card-border-light); --shadow-color: var(--shadow-light); 
            --focus-ring-color: var(--focus-ring-light); --highlight-color: var(--highlight-light);
            --highlight-text-color: var(--text-light);
            --flip-front-bg: var(--flip-front-bg-light);
            --flip-back-bg: var(--flip-back-bg-light);
            --flip-back-text: var(--flip-back-text-light);
            --quiz-expl-bg: var(--quiz-expl-bg-light);
            --quiz-expl-border: var(--quiz-expl-border-light);
            --quiz-expl-text: var(--quiz-expl-text-light);
        }
        [data-theme="dark"] {
            --bg-color: var(--bg-dark); --text-color: var(--text-dark); --text-secondary-color: var(--text-dark-secondary);
            --card-bg-color: var(--card-bg-dark); --accent-color: var(--accent-dark);
            --border-color: var(--card-border-dark); --shadow-color: var(--shadow-dark); 
            --focus-ring-color: var(--focus-ring-dark); --highlight-color: var(--highlight-dark);
            --highlight-text-color: var(--highlight-text-dark);
            --flip-front-bg: var(--flip-front-bg-dark);
            --flip-back-bg: var(--flip-back-bg-dark);
            --flip-back-text: var(--flip-back-text-dark);
            --quiz-expl-bg: var(--quiz-expl-bg-dark);
            --quiz-expl-border: var(--quiz-expl-border-dark);
            --quiz-expl-text: var(--quiz-expl-text-dark);
        }
        
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        
        html { font-size: 100%; -webkit-text-size-adjust: 100%; scroll-behavior: smooth; }
        
        body {
            font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color);
            transition: background-color 0.4s ease, color 0.4s ease; -webkit-tap-highlight-color: transparent;
            line-height: 1.8; overflow-x: hidden;
        }
        body.no-scroll { overflow: hidden; height: 100%; width: 100%; }

        button { cursor: pointer; border: none; background: none; font-family: inherit; color: inherit; -webkit-tap-highlight-color: transparent; }
        button:focus-visible { outline: 2px solid var(--focus-ring-color); outline-offset: 2px; border-radius: 4px; }
        button:active { transform: scale(0.98); }

        .app-container { opacity: 0; transition: opacity 0.5s ease; }
        .app-container.loaded { opacity: 1; }
        
        /* HEADER */
        .header {
            position: sticky; top: 0; z-index: 100;
            background-color: rgba(245, 245, 244, 0.9);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid transparent;
            transition: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1), box-shadow 0.3s ease;
            will-change: transform;
        }
        [data-theme="dark"] .header { background-color: rgba(28, 25, 23, 0.9); }
        .header.hidden { transform: translateY(-100%); }
        .header.scrolled { border-bottom-color: var(--border-color); box-shadow: var(--shadow-color); }

        .header-content { padding: 0.75rem 1.5rem; display: flex; justify-content: space-between; align-items: center; min-height: 64px; }
        .header-title { font-family: 'Playfair Display', serif; font-size: 1.25rem; font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex-grow: 1; text-align: left; margin-right: 1rem; }
        
        .controls { display: flex; align-items: center; gap: 0.75rem; }
        
        .icon-btn { display: flex; align-items: center; justify-content: center; width: 42px; height: 42px; border-radius: 12px; transition: background-color 0.2s; }
        .icon-btn:hover { background-color: var(--border-color); }
        .icon-btn svg { width: 22px; height: 22px; color: var(--text-secondary-color); transition: color 0.3s; }
        .icon-btn.active svg { color: var(--accent-color); }
        
        /* Nav Buttons Desktop */
        .nav-buttons-desktop {
            display: none;
            position: fixed; bottom: 2rem; right: 2rem;
            flex-direction: column; gap: 0.5rem;
            z-index: 95;
        }
        .icon-btn.disabled { opacity: 0.3; pointer-events: none; cursor: default; }

        #autoscroll-btn { display: none; }

        .theme-switcher .sun-icon { display: none; } [data-theme="light"] .theme-switcher .sun-icon { display: block; }
        .theme-switcher .moon-icon { display: none; } [data-theme="dark"] .theme-switcher .moon-icon { display: block; }

        .mode-switcher { display: flex; background-color: var(--border-color); border-radius: 14px; padding: 4px; }
        .mode-btn { font-size: 0.85rem; font-weight: 600; padding: 6px 16px; border-radius: 10px; color: var(--text-secondary-color); transition: all 0.2s ease; }
        .mode-btn.active { background-color: var(--card-bg-color); color: var(--text-color); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .desktop-mode-switcher { display: none; }

        /* TIMELINE MOBILE */
        .progress-timeline-mobile { padding: 0 1.5rem 1rem 1.5rem; touch-action: none; }
        .timeline-track { position: relative; width: 100%; height: 6px; background-color: var(--border-color); border-radius: 3px; cursor: pointer; }
        .timeline-progress { position: absolute; top: 0; left: 0; height: 100%; background-color: var(--accent-color); border-radius: 3px; width: 0; transition: width 0.2s linear; will-change: width; }
        .timeline-nodes { position: absolute; top: 50%; left: 0; width: 100%; display: flex; justify-content: space-between; pointer-events: none; }
        .timeline-node-point {
            width: 12px; height: 12px; border-radius: 50%; background-color: var(--border-color);
            border: 2px solid var(--bg-color); transform: translateY(-50%); transition: transform 0.3s ease, background-color 0.3s ease;
            pointer-events: auto;
        }
        .timeline-node-point.past, .timeline-node-point.active { background-color: var(--accent-color); }
        .timeline-node-point.active { transform: translateY(-50%) scale(1.4); box-shadow: 0 0 0 4px var(--highlight-color); }

        /* LAYOUT & CHAPTERS */
        .main-layout { padding-top: 4rem; }
        #story-panel { padding: 0 1.5rem; }
        
        .story-chapter {
            min-height: 90vh; padding: 6rem 0;
            display: flex; align-items: center; justify-content: center;
            opacity: 0.5; transform: scale(0.98); filter: blur(1px);
            transition: opacity 0.6s ease, transform 0.6s ease, filter 0.6s ease; 
            border-bottom: 1px dashed var(--border-color);
        }
        .story-chapter:last-child { border-bottom: none; min-height: 80vh; }
        .story-chapter.active { opacity: 1; transform: scale(1); filter: blur(0); }
        
        .chapter-content { max-width: 680px; width: 100%; }
        .chapter-title { font-family: 'Playfair Display', serif; font-size: clamp(2rem, 8vw, 3rem); color: var(--text-color); margin-bottom: 2rem; line-height: 1.15; letter-spacing: -0.02em; word-wrap: break-word;}
        .chapter-body { font-size: 1.125rem; line-height: 2.1; color: var(--text-secondary-color); }
        
        .chapter-body p, .chapter-body ul, .chapter-body ol { margin-bottom: 1.5rem; }
        .chapter-body ul, .chapter-body ol { padding-left: 1.2rem; }
        .chapter-body li { margin-bottom: 0.75rem; padding-left: 0.5rem; }
        .chapter-body li::marker { color: var(--accent-color); font-weight: 700; }
        .chapter-body strong { font-weight: 700; color: var(--text-color); }
        .chapter-body h4 { 
            font-size: 0.95rem; margin: 2.5rem 0 1rem 0; color: var(--accent-color); 
            text-transform: uppercase; letter-spacing: 0.08em; font-weight: 700;
            display: flex; align-items: center; gap: 0.5rem;
            line-height: 1.4;
        }
        .chapter-body h4::after { content: ''; flex-grow: 1; height: 1px; background-color: var(--border-color); opacity: 0.5; }
        
        /* INTERACTIVE ELEMENTS */
        .interactive-accordion { 
            margin: 2rem 0; border: 1px solid var(--border-color); border-radius: 16px; 
            overflow: hidden; background-color: var(--card-bg-color); box-shadow: var(--shadow-color);
            width: 100%;
        }
        .acc-item { border-bottom: 1px solid var(--border-color); }
        .acc-item:last-child { border-bottom: none; }
        .acc-header {
            width: 100%; padding: 1.25rem 1.5rem; text-align: left;
            background-color: var(--card-bg-color); font-weight: 600; color: var(--text-color);
            display: flex; justify-content: space-between; align-items: center;
            transition: background-color 0.2s; font-size: 1rem; line-height: 1.4;
        }
        .acc-header:hover { background-color: var(--bg-color); }
        .acc-header .acc-icon { 
            width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;
            color: var(--accent-color); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0; margin-left: 12px;
        }
        .acc-item.open .acc-header .acc-icon { transform: rotate(135deg); }
        .acc-body {
            max-height: 0; overflow: hidden; transition: max-height 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: var(--bg-color);
        }
        .acc-content { padding: 1.25rem 1.5rem; font-size: 1rem; color: var(--text-secondary-color); border-top: 1px dashed var(--border-color); line-height: 1.6; }

        /* PRE/CODE STYLES FOR POETRY */
        .poetry-block {
            font-family: 'Inter', sans-serif;
            white-space: pre-wrap;
            background: var(--bg-color);
            padding: 1.5rem;
            border-left: 3px solid var(--accent-color);
            margin: 1rem 0;
            font-style: italic;
        }
        
        /* BOX FOR EXPLANATIONS */
        .explanation-box {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }
        .explanation-title {
            color: var(--accent-color);
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        /* FLIP CARDS (ADAPTIVE GRID) */
        .flip-container { 
            margin: 2.5rem auto; 
            perspective: 1000px; 
            width: 100%; 
            max-width: 500px; 
            min-height: 300px;
        }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            cursor: pointer;
            box-shadow: var(--shadow-color);
            border-radius: 20px;
            display: grid;
            grid-template-areas: "card-face";
        }
        .flip-container.flipped .flip-card-inner { transform: rotateY(180deg); }
        
        .flip-front, .flip-back {
            grid-area: card-face; 
            width: 100%;
            -webkit-backface-visibility: hidden; 
            backface-visibility: hidden;
            border-radius: 20px; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            padding: 2rem;
        }
        
        .flip-front { background-color: var(--flip-front-bg); border: 1px solid var(--border-color); }
        .flip-back {
            background-color: var(--flip-back-bg); color: var(--flip-back-text); transform: rotateY(180deg);
        }
        
        .flip-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.75rem; color: var(--text-color); line-height: 1.3; }
        .flip-hint { 
            font-size: 0.8rem; color: var(--accent-color); margin-top: 1.5rem; 
            font-weight: 600; text-transform: uppercase; letter-spacing: 1.5px;
            opacity: 0.8; display: flex; align-items: center; gap: 6px; flex-shrink: 0;
        }
        .flip-hint::after { content: '↻'; font-size: 1.2em; margin-top: -2.6px; }
        
        .flip-back p, .flip-back ul { color: var(--flip-back-text); font-size: 1.1rem; line-height: 1.6; margin: 0; font-weight: 500; width: 100%;}
        .flip-back ul { text-align: left; padding-left: 1.5rem; margin-top: 0.5rem; }
        .flip-back li { margin-bottom: 0.5rem; }
        
        [data-theme="light"] .flip-back li::marker { color: var(--accent-color); }
        [data-theme="dark"] .flip-back li::marker { color: white; }

        #timeline-desktop { display: none; }
        #scroll-sentinel { position: absolute; top: 0; height: 1px; width: 1px; pointer-events: none; }

        .app-footer {
            position: fixed; bottom: 0; left: 0; width: 100%; z-index: 90;
            display: flex; justify-content: center; 
            padding: 1rem 1.5rem calc(1rem + env(safe-area-inset-bottom));
            pointer-events: none;
        }
        .app-footer.hidden { transform: translateY(150%); }
        .footer-mode-switcher { 
            display: flex; pointer-events: auto;
            background-color: rgba(255, 255, 255, 0.9); 
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); 
            border-radius: 24px; padding: 6px; 
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05);
        }
        [data-theme="dark"] .footer-mode-switcher { background-color: rgba(28, 25, 23, 0.9); border-color: rgba(255,255,255,0.1); }

        /* QUIZ MODE */
        .quiz-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 200;
            display: flex; align-items: center; justify-content: center; padding: 1rem;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            opacity: 0; transition: opacity 0.4s ease, visibility 0.4s; visibility: hidden;
        }
        .quiz-overlay.visible { opacity: 1; visibility: visible; }
        .quiz-container {
            background-color: var(--card-bg-color); border: 1px solid var(--border-color);
            width: 96%; max-width: 600px; 
            height: auto; max-height: 85vh;
            border-radius: 24px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            display: flex; flex-direction: column; overflow: hidden;
            transform: scale(0.95) translateY(10px); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .quiz-overlay.visible .quiz-container { transform: scale(1) translateY(0); }
        
        .quiz-header { padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; background-color: var(--bg-color); }
        .quiz-title { font-weight: 600; color: var(--text-secondary-color); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .quiz-body { flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; -webkit-overflow-scrolling: touch; }
        #quiz-content-wrapper { padding: 1.5rem; display: flex; flex-direction: column; justify-content: center; min-height: 100%;}
        
        .quiz-slide { width: 100%; opacity: 0; transition: opacity 0.3s ease; }
        .quiz-slide.active { opacity: 1; }
        
        .quiz-question-text { font-size: clamp(1.1rem, 4vw, 1.35rem); font-weight: 700; margin-bottom: 1.5rem; line-height: 1.4; color: var(--text-color); }
        .quiz-answers { display: grid; gap: 0.75rem; }
        .quiz-answer-btn {
            width: 100%; padding: 1rem 1.25rem; text-align: left; background-color: var(--bg-color);
            border: 2px solid transparent; border-radius: 16px; font-size: 1rem; font-weight: 500;
            transition: all 0.2s ease; color: var(--text-color);
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            word-break: break-word; hyphens: auto; line-height: 1.4;
        }
        .quiz-answer-btn:hover { background-color: var(--border-color); }
        .quiz-answer-btn:active { transform: scale(0.98); }
        .quiz-answer-btn.correct { background-color: #dcfce7; color: #14532d; border-color: #22c55e; }
        [data-theme="dark"] .quiz-answer-btn.correct { background-color: #14532d; color: #f0fdf4; border-color: #22c55e; }
        .quiz-answer-btn.incorrect { background-color: #fee2e2; color: #7f1d1d; border-color: #ef4444; }
        [data-theme="dark"] .quiz-answer-btn.incorrect { background-color: #7f1d1d; color: #fef2f2; border-color: #ef4444; }
        .quiz-answer-btn.disabled { opacity: 0.6; pointer-events: none; }
        
        .quiz-explanation {
            margin-top: 1.5rem; padding: 1.25rem; border-radius: 12px; font-size: 1rem; line-height: 1.5;
            background-color: var(--quiz-expl-bg); border: 1px solid var(--quiz-expl-border); color: var(--quiz-expl-text);
            opacity: 0; transform: translateY(10px); transition: opacity 0.4s ease, transform 0.4s ease; display: none;
        }
        .quiz-explanation.visible { opacity: 1; transform: translateY(0); display: block; }

        .quiz-footer { 
            padding: 1.5rem; border-top: 1px solid var(--border-color); flex-shrink: 0; background-color: var(--bg-color);
            padding-bottom: calc(1.5rem + env(safe-area-inset-bottom)/2);
        }
        .quiz-next-btn { width: 100%; background-color: var(--accent-color); color: white; padding: 1rem; border-radius: 14px; font-size: 1.1rem; font-weight: 600; transition: opacity 0.2s, transform 0.2s; }
        .quiz-next-btn:active { transform: scale(0.98); }
        .quiz-next-btn:disabled { background-color: var(--border-color); color: var(--text-secondary-color); cursor: not-allowed; transform: none; }

        .quiz-results-wrapper { text-align: center; display: flex; flex-direction: column; justify-content: center; min-height: 100%; padding: 1.5rem; }
        .quiz-results-title { font-family: 'Playfair Display', serif; font-size: 2.2rem; margin-bottom: 0.5rem; color: var(--text-color); }
        .quiz-results-score { font-size: 3.5rem; font-weight: 800; color: var(--accent-color); line-height: 1; margin: 1rem 0; }
        .quiz-results-text { font-size: 1.1rem; color: var(--text-secondary-color); margin-bottom: 2rem; }
        .quiz-results-actions { display: flex; flex-direction: column; gap: 0.75rem; width: 100%; }
        .quiz-results-actions .quiz-next-btn.secondary { background-color: transparent; border: 2px solid var(--border-color); color: var(--text-color); }
        .quiz-results-actions .quiz-next-btn.secondary:hover { border-color: var(--text-secondary-color); }

        /* DESKTOP OVERRIDES & RESPONSIVE FIXES */
        @media (min-width: 960px) {
            .progress-timeline-mobile { display: none; }
            .app-footer { display: none; }
            .desktop-mode-switcher { display: flex; }
            #autoscroll-btn { display: flex; } 
            
            .nav-buttons-desktop { display: flex; }
            
            .main-layout { 
                display: grid; 
                grid-template-columns: 1fr minmax(0, 680px) 1fr; 
                gap: 2rem; 
                max-width: 100%; 
                margin: 0; 
                padding: 0 2rem; 
            }
            
            #timeline-desktop {
                grid-column: 1;
                display: flex; 
                position: sticky; top: 0; height: 100vh;
                align-items: center; 
                justify-content: flex-end;
            }
            
            #story-panel { grid-column: 2; padding: 0; }

            .timeline-desktop-container { 
                position: relative; 
                width: 220px; 
                padding: 4rem 1rem 4rem 0; 
                display: flex; justify-content: flex-end;
            }
            
            .timeline-svg {
                position: absolute; right: 0; 
                top: 0; height: 100%; width: 2px; overflow: visible;
                z-index: 0;
                pointer-events: none; 
            }
            .timeline-svg-line { stroke: var(--border-color); stroke-width: 2px; fill: none; }
            .timeline-svg-progress {
                stroke: var(--accent-color); stroke-width: 2px; fill: none; transition: stroke-dashoffset 0.4s ease;
            }

            .timeline-desktop-nodes { 
                display: flex; flex-direction: column; gap: 1.5rem; 
                align-items: flex-end; text-align: right; width: 100%; 
                z-index: 1; 
            }
            
            .timeline-desktop-node {
                display: flex; align-items: center; gap: 1.5rem; padding: 0.5rem 0;
                position: relative; transition: opacity 0.3s; flex-direction: row-reverse; 
                width: 140%; 
                cursor: pointer; padding-right: 15px;
            }
            .timeline-desktop-node:hover .node-label { color: var(--accent-color); }
            .timeline-desktop-node .node-point {
                width: 14px; height: 14px; border-radius: 50%; background-color: var(--border-color);
                border: 3px solid var(--bg-color); transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); flex-shrink: 0; 
                z-index: 2; position: relative;
            }
            .timeline-desktop-node::after {
                content: ''; position: absolute; top: 0; right: -10px; bottom: 0; width: 100%; z-index: -1;
            }

            .timeline-desktop-node .node-label { 
                font-size: 0.95rem; font-weight: 500; color: var(--text-secondary-color); 
                transition: color 0.3s ease, transform 0.3s ease;
                white-space: nowrap;
            }

            .timeline-desktop-node.active .node-point { background-color: var(--accent-color); transform: scale(1.3); box-shadow: 0 0 0 4px var(--highlight-color); }
            .timeline-desktop-node.active .node-label { color: var(--text-color); font-weight: 700; transform: translateX(-5px); }
            .timeline-desktop-node.past .node-point { background-color: var(--accent-color); border-color: var(--accent-color); }

            .story-chapter { padding: 6rem 0; min-height: 85vh; }
            .story-chapter:first-child { padding-top: 4rem; }
        }
        
        @media (min-width: 1200px) {
             .main-layout { gap: 4rem; }
        }
    </style>
</head>
<body>
    <div id="scroll-sentinel"></div>
    <div class="app-container" id="app">
        <header class="header" id="header">
            <div class="header-content">
                <h1 class="header-title" id="header-title">Letteratura: Verismo e Novecento</h1>
                <div class="controls">
                    <div class="mode-switcher desktop-mode-switcher">
                        <button class="mode-btn" data-mode="study">Studio</button>
                        <button class="mode-btn" data-mode="story">Storia</button>
                    </div>
                    
                    <button class="icon-btn" id="autoscroll-btn" aria-label="Attiva/Disattiva Autoscroll">
                         <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 20V7m0 13-4-4m4 4 4-4m4-12v13m0-13 4 4m-4-4-4 4"/>
                        </svg>
                    </button>

                     <button class="icon-btn" id="quiz-btn" aria-label="Avvia Quiz">
                        <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 3L1 9l11 6 9-4.5V12h2V9l-11-6zM5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82z"/></svg>
                    </button>
                    <button class="icon-btn theme-switcher" aria-label="Cambia Tema">
                        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    </button>
                </div>
            </div>
            <div class="progress-timeline-mobile">
                <div class="timeline-track" id="timeline-track-mobile">
                    <div class="timeline-progress" id="timeline-progress-mobile"></div>
                    <div class="timeline-nodes" id="timeline-nodes-mobile"></div>
                </div>
            </div>
        </header>
        
        <!-- DESKTOP NAV BUTTONS -->
        <div class="nav-buttons-desktop">
            <button class="icon-btn" id="prev-chapter-btn" aria-label="Capitolo precedente">
                <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                  <path fill-rule="evenodd" d="M5.575 13.729C4.501 15.033 5.43 17 7.12 17h9.762c1.69 0 2.618-1.967 1.544-3.271l-4.881-5.927a2 2 0 0 0-3.088 0l-4.88 5.927Z" clip-rule="evenodd"/>
                </svg>
            </button>
            <button class="icon-btn" id="next-chapter-btn" aria-label="Capitolo successivo">
                <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                  <path fill-rule="evenodd" d="M18.425 10.271C19.499 8.967 18.57 7 16.88 7H7.12c-1.69 0-2.618 1.967-1.544 3.271l4.881 5.927a2 2 0 0 0 3.088 0l4.88-5.927Z" clip-rule="evenodd"/>
                </svg>
            </button>
        </div>

        <div class="main-layout">
            <aside id="timeline-desktop">
                <div class="timeline-desktop-container">
                    <svg class="timeline-svg">
                        <line class="timeline-svg-line" x1="1" y1="0" x2="1" y2="100%"></line>
                        <line class="timeline-svg-progress" id="timeline-progress-desktop" x1="1" y1="0" x2="1" y2="100%"></line>
                    </svg>
                    <div class="timeline-desktop-nodes" id="timeline-nodes-desktop"></div>
                </div>
            </aside>
            <main id="story-panel"></main>
        </div>

        <footer class="app-footer" id="app-footer">
            <div class="mode-switcher footer-mode-switcher">
                <button class="mode-btn" data-mode="study">Studio</button>
                <button class="mode-btn" data-mode="story">Storia</button>
            </div>
        </footer>
    </div>
    
    <div class="quiz-overlay" id="quiz-overlay">
        <div class="quiz-container" id="quiz-container"></div>
    </div>

    <script>
        /* 
           =================================================================
           DATI DEL CORSO - CONTENUTI SEMPLIFICATI E SPIEGATI
           =================================================================
        */
        const learningContent = {
            title: "Letteratura: Tra '800 e '900",
            chapters: [
                {
                    id: 'verga-cavalleria',
                    title: 'Giovanni Verga: Cavalleria Rusticana',
                    description: `
                        <div class="explanation-box">
                            <span class="explanation-title">Che cos'è?</span>
                            <p>È una <strong>novella</strong> (un racconto breve) che parla di amore, gelosia e vendetta in un paese siciliano. Fa parte della raccolta <em>Vita dei campi</em> ed è un esempio perfetto di <strong>Verismo</strong>.</p>
                        </div>

                        <div class="explanation-box">
                            <span class="explanation-title">Cosa devi sapere (Concetti Chiave)</span>
                            <ul>
                                <li><strong>Il Verismo:</strong> Verga vuole "fotografare" la realtà così com'è, senza giudicare. L'autore deve "sparire" (tecnica dell'impersonalità).</li>
                                <li><strong>Il Linguaggio:</strong> Sembra italiano scorretto, ma è voluto! Verga usa la sintassi del dialetto siciliano traducendola in italiano (es. "A me mi hanno detto") per far parlare i personaggi come contadini veri.</li>
                                <li><strong>L'Ideale dell'ostrica:</strong> I personaggi sono legati al loro ambiente povero come l'ostrica allo scoglio; se provano a staccarsi per migliorare (o per seguire passioni sfrenate), finiscono male.</li>
                            </ul>
                        </div>

                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">Analisi del Testo <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>Titolo Ironico:</strong> "Cavalleria rusticana" significa "cavalleria contadina". Verga è ironico: i nobili cavalieri del passato duellavano per onore alto; qui i contadini si ammazzano a coltellate per gelosia e possesso, ma seguono comunque un "codice d'onore" rigido.</p>
                                    <p><strong>I Personaggi:</strong></p>
                                    <ul>
                                        <li><strong>Turiddu:</strong> Il soldato tornato a casa, vanitoso e passionale.</li>
                                        <li><strong>Lola:</strong> La donna che ha tradito la promessa sposando un altro per interesse (la "roba").</li>
                                        <li><strong>Santa:</strong> La "spiata". È lei che fa scattare la tragedia dicendo ad Alfio del tradimento, per vendicarsi di Turiddu.</li>
                                        <li><strong>Alfio:</strong> Il marito tradito. Non uccide per odio, ma per "dovere" sociale. Deve lavare l'onta col sangue.</li>
                                    </ul>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">Leggi i pezzi importanti (Testo Integrale) <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>Il ritorno e la scoperta:</strong><br>"Che è vero che vi maritate con compare Alfio, il carrettiere?"<br>"Se c'è la volontà di Dio!" rispose Lola.</p>
                                    <p><strong>La spiata di Santa (momento cruciale):</strong><br>"Avete ragione di portarle dei regali," gli disse la vicina Santa, "perché mentre voi siete via vostra moglie vi adorna la casa!" (significa che lo tradisce).</p>
                                    <p><strong>La sfida (il rito):</strong><br>Turiddu strinse fra i denti l'orecchio del carrettiere (è il segnale che accetta il duello mortale).</p>
                                    <p><strong>La fine:</strong><br>Turiddu muore tra i fichidindia chiamando "Mamma mia!".</p>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>Immagina un paese della Sicilia bruciato dal sole. <strong>Turiddu</strong> torna dal militare e scopre che la sua fidanzata, <strong>Lola</strong>, si è stancata di aspettarlo e ha sposato <strong>Alfio</strong>, un carrettiere ricco.</p>
                        <p>Per ripicca, Turiddu inizia a corteggiare un'altra ragazza, <strong>Santa</strong>. Ma è solo un trucco per far ingelosire Lola. Il piano funziona: Lola riprende a vederlo di nascosto. Ma Santa capisce di essere stata usata e si infuria.</p>
                        <p>Cosa fa Santa? Vede passare Alfio (il marito di Lola) e gli dice tutto: "Tua moglie ti tradisce con Turiddu". In questo mondo arcaico, Alfio non può perdonare: deve uccidere per salvare il suo onore. I due uomini si sfidano a duello con i coltelli. Turiddu saluta la madre con un addio disperato e va a farsi ammazzare nei campi.</p>
                    `
                },
                {
                    id: 'verga-lupa',
                    title: 'Giovanni Verga: La Lupa',
                    description: `
                         <div class="explanation-box">
                            <span class="explanation-title">Che cos'è?</span>
                            <p>Un'altra novella di Verga, forse la più intensa. La protagonista, Pina, non è una donna normale: è una forza della natura incontrollabile.</p>
                        </div>

                        <div class="explanation-box">
                            <span class="explanation-title">Cosa devi sapere (Concetti Chiave)</span>
                            <ul>
                                <li><strong>Eros e Thanatos (Amore e Morte):</strong> La passione della Lupa è così forte che porta inevitabilmente alla distruzione.</li>
                                <li><strong>Natura vs Religione:</strong> La Lupa rappresenta l'istinto puro, quasi animale (occhi neri, labbra rosse, cammina sola nelle ore calde). Il villaggio rappresenta la religione e la superstizione (si fanno il segno della croce quando passa).</li>
                                <li><strong>Nessun giudizio morale:</strong> Verga non ci dice "Pina è cattiva". Ci mostra i fatti crudi. Pina segue la sua natura, anche se è mostruosa.</li>
                            </ul>
                        </div>
                        
                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">Leggi i pezzi importanti (Testo Integrale) <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>Descrizione della Lupa:</strong><br>"Aveva su quel pallore due occhi grandi così, e delle labbra fresche e rosse, che vi mangiavano."</p>
                                    <p><strong>La follia amorosa per il genero Nanni:</strong><br>Lei vuole Nanni, ma Nanni vuole sua figlia Maricchia. Allora la Lupa obbliga la figlia a sposarlo pur di averlo in casa.<br>"Se non lo pigli, ti ammazzo!" dice alla figlia.</p>
                                    <p><strong>Il finale (omicidio-suicidio):</strong><br>Nanni, disperato perché non riesce a resisterle, prende l'ascia. Lei non scappa, gli va incontro felice di morire per mano sua.<br>"mangiatemi pure cogli occhi..."</p>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>Al villaggio la chiamano <strong>la Lupa</strong> perché "non è mai sazia" di uomini. È una donna non più giovane, ma ancora sensuale e inquietante. Si innamora follemente di un ragazzo, <strong>Nanni</strong>.</p>
                        <p>Nanni però vuole sposare la figlia della Lupa, Maricchia, per interesse (ha la "roba", la dote). La Lupa accetta, a una condizione mostruosa: vivranno tutti insieme. Così, dopo il matrimonio, continua a sedurre il genero dentro casa.</p>
                        <p>La situazione diventa un incubo. Nanni cerca di liberarsi, chiama i carabinieri, si confessa, ma la tentazione della Lupa è diabolica. Alla fine, capisce che c'è solo un modo per smettere di peccare: ucciderla. Quando lei gli va incontro nei campi, lui alza la scure. Lei non scappa, lo guarda dritto negli occhi fino alla fine.</p>
                    `
                },
                {
                    id: 'simbolismo',
                    title: 'Il Simbolismo: Rimbaud e Pascoli',
                    description: `
                        <div class="explanation-box">
                            <span class="explanation-title">Che cos'è il Simbolismo?</span>
                            <p>È un movimento che dice: la realtà non è quella che vediamo con gli occhi. Dietro le cose c'è un mistero. Il poeta è un "veggente" che riesce a capire i legami segreti tra profumi, suoni e colori.</p>
                        </div>

                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">Giovanni Pascoli: Il gelsomino notturno <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <div class="explanation-box">
                                        <span class="explanation-title">Cosa devi sapere (Tecnica)</span>
                                        <ul>
                                            <li><strong>Metrica:</strong> Sono quartine di <strong>novenari</strong> (versi di 9 sillabe) a rima alternata. Il ritmo è musicale e cullante.</li>
                                            <li><strong>Il tema segreto:</strong> Apparentemente descrive la natura di notte. In realtà, parla della <strong>prima notte di nozze</strong> di un amico. Il poeta è escluso dall'amore e guarda la casa da lontano.</li>
                                            <li><strong>Sinestesia:</strong> "Odore di fragole rosse". Unisce olfatto (odore) e vista (rosse) per descrivere il profumo sensuale del fiore.</li>
                                            <li><strong>Il Non-detto:</strong> Pascoli non dice "fanno l'amore". Dice "splende un lume là nella sala... s'è spento". Lo fa intuire.</li>
                                        </ul>
                                    </div>
                                    <div class="poetry-block">E s'aprono i fiori notturni,
nell'ora che penso a' miei cari.
Sono apparse in mezzo ai viburni
le farfalle crepuscolari.</div>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">Pascoli: L'assiuolo <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>Fonosimbolismo:</strong> È quando il suono delle parole ha un significato. Qui, il verso dell'uccello "chiù" non è solo un suono, ma diventa un simbolo di morte e angoscia che chiude ogni strofa.</p>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">Arthur Rimbaud: Il battello ebbro <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p>Il poeta immagina di essere una barca che ha perso i guidatori e va alla deriva. È la metafora del poeta che deve "sregolare tutti i sensi" (droga, alcol, visioni) per vedere ciò che gli altri non vedono.</p>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>Mentre Verga guardava la realtà come una foto, i Simbolisti chiudono gli occhi e guardano dentro. </p>
                        <p>In Francia, <strong>Rimbaud</strong> scrive di un "battello ubriaco" che naviga mari assurdi e colorati: è il simbolo della libertà totale e pericolosa dell'artista.</p>
                        <p>In Italia, <strong>Giovanni Pascoli</strong> è più intimo. Nel "Gelsomino notturno", ci racconta una serata tranquilla. Ma attenzione ai dettagli: i fiori che si aprono di notte sono simbolo di sesso e fecondità. Pascoli spia una casa dove si spegne la luce: lì dentro due sposi stanno concependo una vita. Lui invece è fuori, solo, a pensare ai suoi morti. È la tragedia di chi si sente escluso dalla vita adulta.</p>
                    `
                },
                {
                    id: 'dannunzio-wilde',
                    title: 'L\'Estetismo: D\'Annunzio e Wilde',
                    description: `
                        <div class="explanation-box">
                            <span class="explanation-title">Che cos'è l'Estetismo?</span>
                            <p>È l'idea che <strong>l'Arte è più importante della Vita</strong>. La vita stessa deve essere vissuta come un'opera d'arte. Non importa se una cosa è "buona" o "morale", importa solo se è <strong>BELLA</strong>.</p>
                        </div>

                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">G. D'Annunzio: La pioggia nel pineto <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <div class="explanation-box">
                                        <span class="explanation-title">Cosa devi sapere (Tecnica)</span>
                                        <ul>
                                            <li><strong>Panismo:</strong> Dal dio greco Pan (Tutto). È la fusione tra uomo e natura. Nella poesia, D'Annunzio e la sua donna (Ermione) si trasformano letteralmente in piante (il cuore come una pesca, i denti come mandorle, i volti come boschi).</li>
                                            <li><strong>Musicalità:</strong> D'Annunzio usa le parole non per il significato, ma per il suono. Vuole imitare il rumore della pioggia (crepitio, scroscio).</li>
                                            <li><strong>Struttura:</strong> Versi liberi (lunghi e corti a caso) per seguire il ritmo libero della pioggia.</li>
                                        </ul>
                                    </div>
                                    <div class="poetry-block">Taci. Su le soglie del bosco non odo parole che dici umane...
Piove su le nostre mani ignude...
E piove su i nostri volti silvani...</div>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">Oscar Wilde: Prefazione a Dorian Gray <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p>È il manifesto dell'Estetismo inglese. Frase chiave: <strong>"Tutta l'arte è completamente inutile"</strong>. Significa che l'arte non deve servire a educare o a fare la morale, esiste solo per la bellezza.</p>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>Gabriele D'Annunzio è in vacanza in una pineta in Toscana con la sua donna, che chiama Ermione. Inizia a piovere. Ma non scappano. Si fermano ad ascoltare.</p>
                        <p>La pioggia fa suoni diversi: sulle foglie larghe, sugli aghi di pino, sulla terra. D'Annunzio ci dice di stare zitti ("Taci!") e ascoltare questa musica. Poi succede la magia: a forza di stare lì, lui ed Ermione smettono di essere umani. La loro pelle diventa corteccia, il loro cuore un frutto. Diventano parte del bosco. Questo è il <strong>Panismo</strong>.</p>
                        <p>Oscar Wilde, invece, ci provoca. Ci dice che non esistono libri morali o immorali, ma solo libri scritti bene o male. L'arte non deve insegnare nulla. Nel suo libro <em>Dorian Gray</em>, il protagonista vende l'anima per restare giovane e bello per sempre, mentre il suo ritratto invecchia e diventa mostruoso al posto suo.</p>
                    `
                },
                {
                    id: 'avanguardie',
                    title: 'Le Rotture: Femminismo e Futurismo',
                    description: `
                        <div class="explanation-box">
                            <span class="explanation-title">Cosa succede nel '900?</span>
                            <p>Tutto cambia. Le donne iniziano a chiedere diritti e gli artisti vogliono distruggere il passato per celebrare la modernità (macchine, velocità).</p>
                        </div>

                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">Sibilla Aleramo: Una donna (1906) <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>Cosa devi sapere:</strong> È il primo romanzo femminista italiano. È autobiografico. Aleramo dice che la donna non deve essere solo una "bambola" o una madre che si sacrifica (come la madre di Cristo), ma una persona con dignità e sogni propri.</p>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">F.T. Marinetti: Il Futurismo <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <div class="explanation-box">
                                        <span class="explanation-title">Cosa devi sapere (Tecnica)</span>
                                        <ul>
                                            <li><strong>Ideologia:</strong> Vogliono distruggere musei e biblioteche ("cimiteri"). Amano la guerra ("igiene del mondo"), la velocità e le macchine da corsa.</li>
                                            <li><strong>Parole in libertà:</strong> Marinetti inventa un nuovo modo di scrivere. Bisogna abolire la punteggiatura, gli aggettivi e gli avverbi (perché rallentano). Bisogna usare i verbi all'infinito (perché sono più veloci) e disporre le parole a caso sulla pagina.</li>
                                        </ul>
                                    </div>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>Immagina una donna, <strong>Sibilla Aleramo</strong>, che nel 1906 ha il coraggio di lasciare un marito violento e rinunciare al figlio pur di non morire dentro. Scrive un libro per dire a tutte: "Non sacrificatevi per forza. Esistete anche per voi stesse".</p>
                        <p>Pochi anni dopo, arriva <strong>Marinetti</strong> urlando. Dice che un'automobile ruggente è più bella della statua della Vittoria di Samotracia. Lancia il <strong>Futurismo</strong>. Basta con le poesie tristi e romantiche! Vuole una letteratura esplosiva, fatta di rumori di città, aerei, pugni e guerra. Vuole distruggere la grammatica come vuole distruggere il passato.</p>
                    `
                },
                {
                    id: 'guerra',
                    title: 'La Grande Guerra: Illusione e Realtà',
                    description: `
                        <div class="explanation-box">
                            <span class="explanation-title">Il contesto</span>
                            <p>I Futuristi volevano la guerra. Ma quando la guerra arriva (1915-18), è un massacro nelle trincee. Gli scrittori al fronte raccontano la verità.</p>
                        </div>

                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">Giuseppe Ungaretti: Veglia <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <div class="explanation-box">
                                        <span class="explanation-title">Cosa devi sapere (Tecnica)</span>
                                        <ul>
                                            <li><strong>Scarnificazione della parola:</strong> Ungaretti usa parole "nude", isolate, circondate dal bianco della pagina. Niente retorica.</li>
                                            <li><strong>Versicoli:</strong> Versi brevissimi, a volte di una sola parola.</li>
                                            <li><strong>Il senso:</strong> In "Veglia", passa la notte vicino a un compagno morto, col viso sfigurato ("bocca digrignata"). Proprio toccando il fondo dell'orrore, sente un bisogno disperato di amore e vita.</li>
                                        </ul>
                                    </div>
                                    <div class="poetry-block">Un’intera nottata
buttato vicino
a un compagno
massacrato...
Non sono mai stato
tanto
attaccato alla vita.</div>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">Emilio Lussu: Un anno sull'altipiano <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p>Racconta l'incompetenza e la follia dei generali italiani, che mandavano i soldati a morire per niente, trattando la guerra come un gioco eroico mentre era solo macelleria.</p>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>La guerra non è bella come diceva Marinetti. È fango, freddo e morte. <strong>Emilio Lussu</strong> ci racconta di generali pazzi che bevono cognac e ordinano assalti suicidi solo per vanità.</p>
                        <p><strong>Ungaretti</strong> scrive le sue poesie su pezzi di carta (cartucce, pacchetti di sigarette) mentre è in trincea. In una notte terribile, è costretto a stare sdraiato accanto al cadavere di un amico. Guarda le sue mani gonfie, la bocca storta nel dolore. Invece di impazzire o odiare, Ungaretti reagisce scrivendo "lettere piene d'amore". Mai come davanti alla morte ha capito quanto è bella la vita.</p>
                    `
                },
                {
                    id: 'pirandello',
                    title: 'Luigi Pirandello: Le Maschere',
                    description: `
                        <div class="explanation-box">
                            <span class="explanation-title">Il pensiero di Pirandello</span>
                            <p>Tutti noi indossiamo una <strong>maschera</strong> (il ruolo che la società ci dà: impiegato, marito, moglie). Sotto la maschera c'è la Vita che scorre, ma la maschera ci soffoca. Se proviamo a toglierla, gli altri ci credono pazzi.</p>
                        </div>

                        <div class="interactive-accordion">
                            <div class="acc-item">
                                <button class="acc-header">Il treno ha fischiato <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>La storia:</strong> Belluca è un impiegato modello, sottomesso, con una vita familiare infernale. Un giorno impazzisce e si ribella al capo. In realtà non è pazzo: ha sentito il fischio di un treno nella notte. Quel suono gli ha ricordato che esiste il mondo (Venezia, la Siberia) fuori dalla sua prigione. Ora sopporta la vita viaggiando con la fantasia (questa è la sua "valvola di sfogo").</p>
                                </div></div>
                            </div>
                            <div class="acc-item">
                                <button class="acc-header">La carriola <span class="acc-icon">+</span></button>
                                <div class="acc-body"><div class="acc-content">
                                    <p><strong>La storia:</strong> Un avvocato famosissimo e rispettato si sente in trappola nel suo ruolo "perfetto". Per non soffocare, ha un segreto: ogni giorno chiude la porta dello studio e fa fare la carriola alla sua cagnetta per un minuto. È un atto di "follia cosciente" per sentirsi vivo e libero dalla sua maschera sociale.</p>
                                </div></div>
                            </div>
                        </div>
                    `,
                    storyDescription: `
                        <p>Ti sei mai sentito intrappolato in quello che gli altri si aspettano da te? Pirandello parla di questo. </p>
                        <p>Prendi <strong>Belluca</strong>. È l'impiegato più noioso del mondo. Ma una notte sente un treno fischiare in lontananza. *Booo!* Quel suono gli apre il cervello: si ricorda che il mondo è grande! Il giorno dopo il capo lo sgrida e lui risponde urlando. Lo chiudono in manicomio. Ma lui sta bene: ha solo scoperto la fantasia come via di fuga.</p>
                        <p>Oppure l'avvocato de <em>La Carriola</em>. È un uomo serissimo. Nessuno sospetterebbe mai che ogni giorno, nel segreto del suo studio, prende il cane per le zampe posteriori e gli fa fare la carriola. Perché? Perché ha bisogno di un attimo al giorno in cui non è un avvocato, non è un padre, non è "serio". Ha bisogno di essere libero.</p>
                    `
                }
            ]
        };

        /* 
           =================================================================
           DATI DEL QUIZ
           =================================================================
        */
        /* 
   =================================================================
   DATI DEL QUIZ - MODALITÀ "TOTALITY" (Oltre 100 domande)
   =================================================================
*/
	const quizData = [
		// --- GIOVANNI VERGA: CAVALLERIA RUSTICANA ---

		{
			question: "In 'Cavalleria Rusticana', qual è la professione di Alfio?",
			options: ["Carrettiere", "Bersagliere", "Contadino", "Vignaiolo"],
			correctAnswer: "Carrettiere",
			explanation: "Alfio è un carrettiere benestante che possiede quattro muli."
		},
		{
			question: "Chi uccide Turiddu alla fine della novella?",
			options: ["Alfio", "Non viene specificato", "Si suicida", "Lola"],
			correctAnswer: "Alfio",
			explanation: "Anche se l'azione avviene 'fuori scena', è Alfio ad uccidere Turiddu col coltello nel duello finale."
		},
		{
			question: "Perché Turiddu inizia a corteggiare Santa?",
			options: ["Per far ingelosire Lola", "Perché ne è innamorato", "Per i soldi di suo padre", "Perché Lola è morta"],
			correctAnswer: "Per far ingelosire Lola",
			explanation: "È una strategia: vuole colpire Lola nell'orgoglio mostrandole che sta con un'altra."
		},
		{
			question: "Cosa significa il gesto di mordere l'orecchio del rivale?",
			options: ["È l'accettazione ufficiale della sfida a duello", "È un segno di affetto mafioso", "È un insulto senza conseguenze", "Significa che si rifiuta la lotta"],
			correctAnswer: "È l'accettazione ufficiale della sfida a duello",
			explanation: "Nel codice rusticano, l'abbraccio seguito dal morso all'orecchio sancisce la promessa solenne di battersi fino alla morte."
		},
		{
			question: "Qual è il ruolo di Santa nella tragedia?",
			options: ["È la causa scatenante (fa la spia)", "Cerca di mettere pace", "È la vittima sacrificale", "Fugge con Turiddu"],
			correctAnswer: "È la causa scatenante (fa la spia)",
			explanation: "Ferita dall'essere stata usata, Santa rivela ad Alfio il tradimento di Lola, innescando il meccanismo di vendetta."
		},
		{
			question: "Come viene descritto il narratore in Verga?",
			options: ["Impersonale e popolare", "Onnisciente e giudicante", "Autobiografico", "Colto e raffinato"],
			correctAnswer: "Impersonale e popolare",
			explanation: "Il narratore 'regredisce' al livello culturale dei personaggi, usando i loro modi di dire e senza giudicare dall'alto."
		},
		{
			question: "Turiddu indossa la divisa da bersagliere. Perché?",
			options: ["Per vanità, per farsi notare dalle ragazze", "Perché è ancora in servizio", "Perché non ha altri vestiti", "Per spaventare Alfio"],
			correctAnswer: "Per vanità, per farsi notare dalle ragazze",
			explanation: "Si pavoneggia in piazza la domenica per mostrare il suo status e attirare l'attenzione."
		},
		{
			question: "Cosa dice Turiddu a sua madre prima di andare al duello?",
			options: ["Chiede un bacio come quando partì soldato", "Confessa tutto", "Le chiede di nasconderlo", "Le chiede soldi"],
			correctAnswer: "Chiede un bacio come quando partì soldato",
			explanation: "È il momento dell'addio: finge di essere ubriaco per nascondere l'angoscia, ma chiede un bacio d'addio definitivo."
		},
		{
			question: "Quale frase pronuncia Santa ad Alfio per rivelare il tradimento?",
			options: ["Vostra moglie vi adorna la casa", "Ho visto Turiddu entrare", "Lola non vi ama più", "Turiddu vi vuole uccidere"],
			correctAnswer: "Vostra moglie vi adorna la casa",
			explanation: "Usa una metafora popolare ('adorna la casa' inteso come 'vi mette le corna') per svelare l'adulterio."
		},
		{
			question: "Alfio agisce spinto da quale sentimento principale?",
			options: ["Dovere sociale e onore", "Amore disperato", "Odio politico", " Avidità"],
			correctAnswer: "Dovere sociale e onore",
			explanation: "Alfio non è un mostro sanguinario, ma 'deve' uccidere perché la società del paese gli impone di lavare l'onta."
		},
		{
			question: "Dove avviene il duello finale?",
			options: ["Tra i fichidindia della Canziria", "In piazza", "Dentro l'osteria", "A casa di Lola"],
			correctAnswer: "Tra i fichidindia della Canziria",
			explanation: "Si allontanano dal paese per battersi in un luogo isolato."
		},

		// --- GIOVANNI VERGA: LA LUPA ---

		{
			question: "Perché Pina è chiamata 'La Lupa'?",
			options: ["Per la sua voracità sessuale insaziabile", "Perché allevava lupi", "Perché era pelosa", "Perché viveva nei boschi"],
			correctAnswer: "Per la sua voracità sessuale insaziabile",
			explanation: "Simboleggia una fame di vita e di sesso che non si placa mai."
		},
		{
			question: "Chi è l'oggetto del desiderio della Lupa?",
			options: ["Nanni", "Il parroco", "Il brigadiere", "Alfio"],
			correctAnswer: "Nanni",
			explanation: "Si invaghisce del giovane Nanni Lasca."
		},
		{
			question: "Cosa è disposta a fare Pina pur di avere Nanni vicino?",
			options: ["Fargli sposare la propria figlia", "Dargli tutti i suoi soldi", "Uccidere la figlia", "Diventare serva"],
			correctAnswer: "Fargli sposare la propria figlia",
			explanation: "Costringe la figlia Maricchia a sposare Nanni per poterlo accogliere in casa come genero."
		},
		{
			question: "Nanni è complice o vittima?",
			options: ["È vittima della tentazione, ma non riesce a resistere", "È totalmente innocente", "È il vero seduttore", "È complice fin dall'inizio"],
			correctAnswer: "È vittima della tentazione, ma non riesce a resistere",
			explanation: "Nanni cerca in tutti i modi di liberarsi (prega, chiama i carabinieri), ma soccombe al fascino della Lupa ('è la tentazione dell'inferno')."
		},
		{
			question: "Come reagisce la Lupa quando Nanni alza la scure per ucciderla?",
			options: ["Gli va incontro offrendosi alla morte", "Scappa urlando", "Cerca di disarmarlo", "Chiama aiuto"],
			correctAnswer: "Gli va incontro offrendosi alla morte",
			explanation: "Non arretra di un passo, continua a guardarlo fissa, accettando la morte come culmine della sua passione."
		},
		{
			question: "Quale elemento naturale è associato alla Lupa?",
			options: ["Il sole pomeridiano e il caldo", "La pioggia", "Il vento freddo", "La neve"],
			correctAnswer: "Il sole pomeridiano e il caldo",
			explanation: "La Lupa vaga nelle ore del meriggio (tra vespero e nona), ore tradizionalmente legate alla tentazione e al diavolo meridiano."
		},
		{
			question: "Cosa porta in mano la Lupa nella scena finale?",
			options: ["Un fascio di papaveri rossi", "Un coltello", "Un rosario", "Delle olive"],
			correctAnswer: "Un fascio di papaveri rossi",
			explanation: "I papaveri rossi sono simbolo di sangue e passione."
		},
		{
			question: "Come vive la figlia Maricchia questa situazione?",
			options: ["Soffre e piange, chiamando la madre 'scellerata'", "Non se ne accorge", "È d'accordo con la madre", "Scappa di casa"],
			correctAnswer: "Soffre e piange, chiamando la madre 'scellerata'",
			explanation: "Maricchia è la vittima passiva, succube della madre."
		},

		// --- GIOVANNI PASCOLI ---

		{
			question: "Di cosa parla realmente 'Il gelsomino notturno'?",
			options: ["Della prima notte di nozze di un amico", "Della botanica notturna", "Della morte del padre", "Di un temporale estivo"],
			correctAnswer: "Della prima notte di nozze di un amico",
			explanation: "Sotto la descrizione della natura, Pascoli allude al concepimento che avviene nella casa degli sposi."
		},
		{
			question: "Cosa simboleggia l'immagine 'urna molle e segreta'?",
			options: ["Il grembo femminile fecondato", "Un vaso di fiori", "La tomba", "La notte"],
			correctAnswer: "Il grembo femminile fecondato",
			explanation: "È una metafora dell'utero che accoglie la vita (il fiore fecondato che si chiude)."
		},
		{
			question: "Qual è la metrica de 'Il gelsomino notturno'?",
			options: ["Quartine di novenari", "Terzine dantesche", "Sonetto", "Verso libero"],
			correctAnswer: "Quartine di novenari",
			explanation: "Usa versi di nove sillabe, creando un ritmo particolare."
		},
		{
			question: "Ne 'L'assiuolo', il verso 'chiù' è:",
			options: ["Un'onomatopea che diventa simbolo di morte", "Solo un suono di uccello", "Il nome del poeta", "Un grido di gioia"],
			correctAnswer: "Un'onomatopea che diventa simbolo di morte",
			explanation: "Si chiama fonosimbolismo: il suono assume un significato cupo e angoscioso."
		},
		{
			question: "In 'Italy', quale problema sociale affronta Pascoli?",
			options: ["L'emigrazione italiana", "La guerra mondiale", "Lo sfruttamento in fabbrica", "La mafia"],
			correctAnswer: "L'emigrazione italiana",
			explanation: "Racconta il ritorno dei migranti dall'America, mescolando dialetto e inglese storpiato."
		},
		{
			question: "Cosa significa 'nido' per Pascoli?",
			options: ["Il rifugio familiare contro il male del mondo", "Un posto dove nascondere soldi", "La natura selvaggia", "La scuola"],
			correctAnswer: "Il rifugio familiare contro il male del mondo",
			explanation: "Il nido è il luogo protetto degli affetti familiari, unico scudo contro la violenza esterna."
		},
		{
			question: "Come viene definito lo stile di Pascoli che usa parole come 'fru fru', 'chiù'?",
			options: ["Fonosimbolismo", "Futurismo", "Verismo", "Ermetismo"],
			correctAnswer: "Fonosimbolismo",
			explanation: "L'uso dei suoni per evocare sensazioni e significati."
		},
		{
			question: "Quale senso prevale nel 'Gelsomino notturno'?",
			options: ["Olfatto e vista", "Solo udito", "Tatto", "Gusto"],
			correctAnswer: "Olfatto e vista",
			explanation: "L'odore di fragole rosse, il lume che splende, i fiori che si aprono."
		},

		// --- D'ANNUNZIO E WILDE (ESTETISMO) ---

		{
			question: "Cos'è il 'Panismo' nella 'Pioggia nel pineto'?",
			options: ["La fusione totale dell'uomo con la natura", "La paura della pioggia", "Il culto del pane", "Una tecnica di pittura"],
			correctAnswer: "La fusione totale dell'uomo con la natura",
			explanation: "I protagonisti perdono la loro umanità per diventare elementi vegetali del bosco."
		},
		{
			question: "A chi si rivolge il poeta dicendo 'Taci'?",
			options: ["A Ermione", "Alla pioggia", "Al lettore", "A se stesso"],
			correctAnswer: "A Ermione",
			explanation: "Invita la sua compagna (Ermione) a fare silenzio per ascoltare la 'musica' della pioggia."
		},
		{
			question: "Ermione è il vero nome della donna?",
			options: ["No, è un nome classico (figlia di Elena)", "Sì, si chiamava così", "Non c'è nessuna donna", "È il nome della madre"],
			correctAnswer: "No, è un nome classico (figlia di Elena)",
			explanation: "D'Annunzio usa nomi mitologici/classici per nobilitare le sue donne (probabilmente Eleonora Duse)."
		},
		{
			question: "Qual è il principio base dell'Estetismo di Wilde?",
			options: ["L'arte per l'arte (Art for Art's sake)", "L'arte per educare", "L'arte per guadagnare", "L'arte per la politica"],
			correctAnswer: "L'arte per l'arte (Art for Art's sake)",
			explanation: "L'arte non ha scopo morale o didattico, deve solo creare Bellezza."
		},
		{
			question: "Nella prefazione di Dorian Gray, come sono i libri secondo Wilde?",
			options: ["Scritti bene o scritti male", "Morali o immorali", "Utili o inutili", "Lunghi o corti"],
			correctAnswer: "Scritti bene o scritti male",
			explanation: "Wilde nega che un libro possa essere 'immorale'. Esiste solo la qualità estetica."
		},
		{
			question: "Cosa bacia Salomé nella tragedia di Wilde?",
			options: ["La bocca della testa mozzata di Iokanaan", "Erode", "Sua madre", "Un anello"],
			correctAnswer: "La bocca della testa mozzata di Iokanaan",
			explanation: "Un atto di necrofilia estetica: bacia le labbra che in vita l'avevano rifiutata."
		},
		{
			question: "Qual è l'atteggiamento di Salomé verso Iokanaan?",
			options: ["Amore e odio ossessivo", "Indifferenza", "Pietà", "Paura"],
			correctAnswer: "Amore e odio ossessivo",
			explanation: "Lo desidera fisicamente ('ho fame del tuo corpo') ma lo fa uccidere perché lui la respinge."
		},

		// --- FUTURISMO E AVANGUARDIE ---

		{
			question: "Come definisce la guerra Marinetti?",
			options: ["Sola igiene del mondo", "Una tragedia inutile", "Un male necessario", "La fine dell'umanità"],
			correctAnswer: "Sola igiene del mondo",
			explanation: "Per i Futuristi, la guerra serve a spazzare via il 'vecchio' e i deboli."
		},
		{
			question: "Cosa vuole distruggere il Futurismo?",
			options: ["Musei, biblioteche e accademie", "Le fabbriche", "Le automobili", "L'elettricità"],
			correctAnswer: "Musei, biblioteche e accademie",
			explanation: "Tutto ciò che rappresenta il passato ('passatismo') va distrutto."
		},
		{
			question: "Secondo il Manifesto Tecnico, cosa bisogna abolire nella scrittura?",
			options: ["L'aggettivo, l'avverbio e la punteggiatura", "I sostantivi", "I verbi", "Le vocali"],
			correctAnswer: "L'aggettivo, l'avverbio e la punteggiatura",
			explanation: "Questi elementi rallentano il discorso. Bisogna usare il verbo all'infinito e sostantivi liberi."
		},
		{
			question: "Cosa è più bello della Vittoria di Samotracia per Marinetti?",
			options: ["Un'automobile da corsa", "Un aereo", "Una mitragliatrice", "Una locomotiva"],
			correctAnswer: "Un'automobile da corsa",
			explanation: "La bellezza della velocità meccanica supera l'arte classica greca."
		},
		{
			question: "Chi scrisse 'Una donna', testo chiave del femminismo?",
			options: ["Sibilla Aleramo", "Grazia Deledda", "Matilde Serao", "Ada Negri"],
			correctAnswer: "Sibilla Aleramo",
			explanation: "È un romanzo autobiografico sulla presa di coscienza femminile."
		},
		{
			question: "Cosa critica Sibilla Aleramo?",
			options: ["Il sacrificio materno come unico valore della donna", "Il lavoro in fabbrica", "Il voto alle donne", "La moda"],
			correctAnswer: "Il sacrificio materno come unico valore della donna",
			explanation: "Rifiuta l'idea che la donna debba annullarsi per i figli e il marito."
		},

		// --- LA GRANDE GUERRA ---

		{
			question: "Come viene rappresentato il generale in 'Un anno sull'altipiano'?",
			options: ["Come un incompetente vanitoso e pericoloso", "Come un eroe saggio", "Come un padre per i soldati", "Come un genio militare"],
			correctAnswer: "Come un incompetente vanitoso e pericoloso",
			explanation: "Lussu descrive la follia dei comandi che trattano la guerra come retorica, ignorando la vita umana."
		},
		{
			question: "Qual è il sentimento dominante in 'Veglia' di Ungaretti?",
			options: ["Attaccamento alla vita", "Odio per il nemico", "Desiderio di morire", "Indifferenza"],
			correctAnswer: "Attaccamento alla vita",
			explanation: "La vicinanza con la morte fa scattare una reazione vitale opposta e potentissima."
		},
		{
			question: "Cosa descrive Comisso in 'Giorni di guerra'?",
			options: ["La fila dei soldati al postribolo", "Una battaglia aerea", "La vita in ospedale", "Il ritorno a casa"],
			correctAnswer: "La fila dei soldati al postribolo",
			explanation: "Mostra il contrasto tra la morte in trincea e la ricerca disperata di un contatto umano/sessuale."
		},
		{
			question: "Ungaretti scrive poesie lunghe e complesse?",
			options: ["No, usa versi brevissimi e scarni", "Sì, come D'Annunzio", "Sì, usa sonetti classici", "Usa solo prosa"],
			correctAnswer: "No, usa versi brevissimi e scarni",
			explanation: "La sua poetica è basata sulla 'scarnificazione': poche parole isolate nel bianco."
		},
		{
			question: "Perché Lussu risponde male al generale?",
			options: ["Perché il generale gli chiede se 'ama' la guerra", "Perché non vuole combattere", "Perché è stanco", "Perché non ha le scarpe"],
			correctAnswer: "Perché il generale gli chiede se 'ama' la guerra",
			explanation: "Lussu trova assurdo parlare di 'amore' per la guerra, considerandola una tragedia seria e non un gioco."
		},

		// --- LUIGI PIRANDELLO ---

		{
			question: "Perché i colleghi credono che Belluca sia impazzito?",
			options: ["Perché si ribella al capoufficio urlando", "Perché arriva nudo", "Perché rompe il computer", "Perché piange"],
			correctAnswer: "Perché si ribella al capoufficio urlando",
			explanation: "Belluca, solitamente sottomesso, ha una reazione violenta e inaspettata dopo l'epifania del treno."
		},
		{
			question: "Cosa rappresenta il 'fischio del treno'?",
			options: ["L'irruzione della vita e della fantasia nella monotonia", "La paura di partire", "Il ritardo al lavoro", "Un incidente ferroviario"],
			correctAnswer: "L'irruzione della vita e della fantasia nella monotonia",
			explanation: "È l'elemento che rompe la 'forma' e gli ricorda che il mondo esiste ancora."
		},
		{
			question: "Qual è il segreto dell'avvocato ne 'La carriola'?",
			options: ["Fa fare la carriola al cane nel suo studio", "Ruba ai clienti", "Ha un'amante", "Vuole uccidersi"],
			correctAnswer: "Fa fare la carriola al cane nel suo studio",
			explanation: "Un atto gratuito e assurdo che compie ogni giorno per liberarsi momentaneamente dal suo ruolo sociale."
		},
		{
			question: "Cos'è la 'Maschera' per Pirandello?",
			options: ["La forma sociale che imprigiona la vita vera", "Un trucco teatrale", "L'ipocrisia volontaria", "Un vestito"],
			correctAnswer: "La forma sociale che imprigiona la vita vera",
			explanation: "Noi siamo 'fissati' in ruoli (padre, marito, professore) che ci impediscono di essere noi stessi."
		},
		{
			question: "Come si salva Belluca dalla pazzia definitiva?",
			options: ["Viaggiando con la fantasia", "Licenziandosi", "Divorziando", "Uccidendo il capo"],
			correctAnswer: "Viaggiando con la fantasia",
			explanation: "Torna al lavoro, ma si concede delle 'fughe mentali' in Siberia o in Congo."
		},
		{
			question: "Cosa hanno in comune Belluca e l'avvocato de La Carriola?",
			options: ["Cercano una valvola di sfogo alla 'forma'", "Sono entrambi poveri", "Sono entrambi siciliani", "Odiano gli animali"],
			correctAnswer: "Cercano una valvola di sfogo alla 'forma'",
			explanation: "Entrambi vivono una vita opprimente e trovano un modo (fantasia o gioco assurdo) per sopravvivere."
		},

		// --- MISTI E CONFRONTI ---

		{
			question: "Chi tra questi autori è esponente del Verismo?",
			options: ["Giovanni Verga", "Gabriele D'Annunzio", "Filippo Tommaso Marinetti", "Luigi Pirandello"],
			correctAnswer: "Giovanni Verga",
			explanation: "Verga è il principale esponente del Verismo italiano."
		},
		{
			question: "Quale movimento letterario esalta la macchina e la velocità?",
			options: ["Futurismo", "Decadentismo", "Verismo", "Simbolismo"],
			correctAnswer: "Futurismo",
			explanation: "È il tema centrale di Marinetti."
		},
		{
			question: "Chi ha scritto 'Il battello ebbro'?",
			options: ["Arthur Rimbaud", "Giovanni Pascoli", "Oscar Wilde", "Charles Baudelaire"],
			correctAnswer: "Arthur Rimbaud",
			explanation: "È il capolavoro giovanile del poeta simbolista francese."
		},
		{
			question: "Quale autore trasforma l'uomo in pianta (Panismo)?",
			options: ["D'Annunzio", "Verga", "Pascoli", "Ungaretti"],
			correctAnswer: "D'Annunzio",
			explanation: "Nella 'Pioggia nel pineto'."
		},
		{
			question: "Pascoli e Verga descrivono la campagna. Qual è la differenza?",
			options: ["Verga è oggettivo/sociale, Pascoli è simbolico/interiore", "Dicono la stessa cosa", "Verga odia la campagna", "Pascoli è verista"],
			correctAnswer: "Verga è oggettivo/sociale, Pascoli è simbolico/interiore",
			explanation: "Verga guarda alla lotta per la vita e alla 'roba'; Pascoli guarda al mistero e al ricordo dei morti dietro la natura."
		},
		{
			question: "Chi usa il dialetto o lingue miste per parlare di emigrazione?",
			options: ["Pascoli in 'Italy'", "Verga", "D'Annunzio", "Marinetti"],
			correctAnswer: "Pascoli in 'Italy'",
			explanation: "Mescola lucchese e inglese ('Ioe', 'chicken-house')."
		},
		{
			question: "Chi sostiene che 'l'arte è inutile'?",
			options: ["Oscar Wilde", "Manzoni", "Verga", "Marinetti"],
			correctAnswer: "Oscar Wilde",
			explanation: "È il dogma dell'Estetismo: l'arte non ha utilità pratica o morale."
		},
		
		// --- NOZIONI SPECIFICHE ---
		
		{
			question: "Chi è 'Gnà Nunzia'?",
			options: ["La madre di Turiddu", "La moglie di Alfio", "La Lupa", "Una vicina"],
			correctAnswer: "La madre di Turiddu",
			explanation: "È la madre a cui Turiddu chiede l'ultimo bacio."
		},
		{
			question: "Cosa regalava Alfio a Lola?",
			options: ["Grossi anelli d'oro", "Libri", "Fiori", "Vestiti"],
			correctAnswer: "Grossi anelli d'oro",
			explanation: "Lola li mostrava in pubblico con le mani sul ventre, segno di ricchezza ostentata."
		},
		{
			question: "Come viene descritto l'ambiente in 'Cavalleria Rusticana'?",
			options: ["Arido e assolato", "Nevoso", "Cittadino", "Boscoso"],
			correctAnswer: "Arido e assolato",
			explanation: "Il paesaggio riflette le passioni secche e violente dei personaggi."
		},
		{
			question: "In quale raccolta si trova 'L'assiuolo'?",
			options: ["Myricae", "Canti di Castelvecchio", "Alcyone", "Odi Barbare"],
			correctAnswer: "Myricae",
			explanation: "È una delle poesie più famose della raccolta Myricae di Pascoli."
		},
		{
			question: "Cosa significa 'chiù'?",
			options: ["È il verso dell'assiuolo", "È un saluto", "È il rumore del treno", "È il nome di un fiore"],
			correctAnswer: "È il verso dell'assiuolo",
			explanation: "L'assiuolo è un piccolo rapace notturno."
		},
		{
			question: "Cosa significa 'racinedda'?",
			options: ["Piccola uva (vezzeggiativo)", "Radice", "Ragno", "Racconto"],
			correctAnswer: "Piccola uva (vezzeggiativo)",
			explanation: "È il complimento che Turiddu fa a Santa ('racinedda mia')."
		},
		{
			question: "Quale animale viene associato a Belluca?",
			options: ["Un vecchio somaro", "Un leone", "Un cane", "Un gatto"],
			correctAnswer: "Un vecchio somaro",
			explanation: "Veniva frustato e lavorava a testa bassa come un vecchio somaro con i paraocchi."
		},
		{
			question: "Cosa vede il poeta nel 'Battello ebbro'?",
			options: ["Crolli d'acque, Leviatani, arcipelaghi siderali", "Città normali", "La sua famiglia", "Un porto sicuro"],
			correctAnswer: "Crolli d'acque, Leviatani, arcipelaghi siderali",
			explanation: "Ha visioni allucinate e grandiose."
		},
		{
			question: "Chi è Maricchia?",
			options: ["La figlia della Lupa", "La moglie di Turiddu", "La donna di D'Annunzio", "Una contadina"],
			correctAnswer: "La figlia della Lupa",
			explanation: "La vittima sacrificata dalla madre Pina."
		},
		{
			question: "Perché D'Annunzio usa la parola 'Ermione'?",
			options: ["Per dare un tono classico e mitico", "Era il nome vero", "Suonava bene", "Non lo sapeva"],
			correctAnswer: "Per dare un tono classico e mitico",
			explanation: "Eleva la realtà quotidiana a mito."
		},
		
		// --- VARIAZIONI E DIVERSE ANGOLAZIONI ---

		{
			question: "Quale di queste affermazioni su 'La Lupa' è FALSA?",
			options: ["La Lupa si pente e diventa suora", "La Lupa seduce il genero", "La figlia soffre", "Nanni la uccide"],
			correctAnswer: "La Lupa si pente e diventa suora",
			explanation: "La Lupa non si pente mai, rimane fedele alla sua natura fino alla morte."
		},
		{
			question: "Quale di queste affermazioni su Marinetti è VERA?",
			options: ["Vuole abolire la sintassi", "Ama l'arte greca", "È un pacifista", "Scrive sonetti d'amore"],
			correctAnswer: "Vuole abolire la sintassi",
			explanation: "È uno dei punti chiave del Manifesto Tecnico."
		},
		{
			question: "Se dico 'scarnificazione della parola', a chi pensi?",
			options: ["Ungaretti", "D'Annunzio", "Manzoni", "Dante"],
			correctAnswer: "Ungaretti",
			explanation: "È la sua tecnica principale per ridare purezza al linguaggio."
		},
		{
			question: "Se dico 'Il treno ha fischiato', qual è il tema?",
			options: ["L'evasione fantastica", "I trasporti pubblici", "Un viaggio reale", "La tecnologia"],
			correctAnswer: "L'evasione fantastica",
			explanation: "Il viaggio è solo mentale."
		},
		{
			question: "Chi dice 'La volontà di Dio la fate col tira e molla come vi torna conto!'?",
			options: ["Turiddu", "Il prete", "Alfio", "La madre"],
			correctAnswer: "Turiddu",
			explanation: "Accusa Lola di usare la religione come scusa per aver sposato un ricco."
		},
		{
			question: "Chi dice 'Te voglio! Te che sei bello come il sole'?",
			options: ["La Lupa", "Lola", "Santa", "Ermione"],
			correctAnswer: "La Lupa",
			explanation: "È la dichiarazione passionale a Nanni."
		},
		{
			question: "Cosa succede alle 'mani' nella Pioggia nel pineto?",
			options: ["Diventano ignude e silvane", "Si bagnano e basta", "Si stringono", "Scrivono"],
			correctAnswer: "Diventano ignude e silvane",
			explanation: "Parte della metamorfosi panica."
		},
		{
			question: "Quale tecnica narrativa usa Verga?",
			options: ["Regressione", "Flusso di coscienza", "Narratore onnisciente", "Prima persona"],
			correctAnswer: "Regressione",
			explanation: "L'autore 'regredisce' culturalmente per sparire nel mondo dei personaggi."
		},
		{
			question: "Perché Santa rivela il tradimento?",
			options: ["Per vendetta amorosa", "Per giustizia", "Per soldi", "Per caso"],
			correctAnswer: "Per vendetta amorosa",
			explanation: "Si sente tradita da Turiddu che è tornato da Lola."
		},
		{
			question: "Pirandello pensa che la 'pazzia' sia sempre negativa?",
			options: ["No, a volte è l'unico modo per sopportare la vita", "Sì, è una malattia da curare", "Sì, bisogna rinchiudere i pazzi", "Non ne parla"],
			correctAnswer: "No, a volte è l'unico modo per sopportare la vita",
			explanation: "Per Belluca e l'avvocato, quel pizzico di follia è la salvezza."
		},
		{
			question: "Cosa simboleggiano i 'fiori notturni' in Pascoli?",
			options: ["L'apertura all'eros nel buio", "La paura del buio", "La morte delle piante", "L'inverno"],
			correctAnswer: "L'apertura all'eros nel buio",
			explanation: "Si aprono proprio mentre gli sposi concepiscono."
		},
		{
			question: "Qual è il colore dominante nella descrizione della Lupa?",
			options: ["Nero (occhi) e Rosso (labbra)", "Bianco e Blu", "Verde", "Giallo"],
			correctAnswer: "Nero (occhi) e Rosso (labbra)",
			explanation: "Colori della morte/peccato e della passione/sangue."
		},
		{
			question: "In quale opera si parla di 'bambola di sangue'?",
			options: ["Una donna (Aleramo)", "La Lupa", "Casa di bambola", "Cavalleria Rusticana"],
			correctAnswer: "Una donna (Aleramo)",
			explanation: "Aleramo descrive così la condizione femminile sottomessa."
		},
		{
			question: "Chi dice 'Amare la guerra!' con sdegno?",
			options: ["Emilio Lussu", "Il generale", "Marinetti", "D'Annunzio"],
			correctAnswer: "Emilio Lussu",
			explanation: "Risponde al generale che pretendeva entusiasmo per il massacro."
		},
		{
			question: "Cosa sono le 'parole in libertà'?",
			options: ["Tecnica futurista senza sintassi", "Discorsi politici", "Poesie d'amore", "Parole urlate"],
			correctAnswer: "Tecnica futurista senza sintassi",
			explanation: "Libere dai legami grammaticali."
		},
		// --- VERGA: CAVALLERIA RUSTICANA (Dettagli e Sfumature) ---
		{
			question: "Cosa facevano Turiddu e Lola prima che lui partisse soldato?",
			options: ["Si parlavano dalla finestra e si scambiavano promesse", "Erano già sposati", "Non si conoscevano", "Lavoravano insieme nei campi"],
			correctAnswer: "Si parlavano dalla finestra e si scambiavano promesse",
			explanation: "C'era un amore pregresso, testimoniato dal fazzoletto che Lola gli aveva regalato e dalle lacrime versate."
		},
		{
			question: "Quale oggetto simbolico Turiddu possiede al suo ritorno?",
			options: ["Una pipa col re a cavallo", "Una medaglia al valore", "Un fucile nuovo", "Un cavallo bianco"],
			correctAnswer: "Una pipa col re a cavallo",
			explanation: "È un dettaglio verista: un oggetto kitsch che Turiddu esibisce per darsi arie da uomo di mondo."
		},
		{
			question: "Cosa succede nell'osteria prima della sfida?",
			options: ["Turiddu offre vino, ma Alfio lo rifiuta", "Bevono insieme amichevolmente", "Alfio offre da bere a tutti", "Lola entra e interrompe tutto"],
			correctAnswer: "Turiddu offre vino, ma Alfio lo rifiuta",
			explanation: "Il rifiuto del vino è il primo segnale formale di ostilità. Accettare il vino avrebbe significato pace."
		},
		{
			question: "Turiddu ha paura di morire?",
			options: ["Sì, pensa alla madre e sa di aver torto", "No, è un eroe impavido", "Non gli importa nulla", "Vuole morire per gloria"],
			correctAnswer: "Sì, pensa alla madre e sa di aver torto",
			explanation: "Dice esplicitamente: 'so che ho torto e mi lascerei ammazzare', ma il pensiero della madre vecchia lo spinge a difendersi."
		},
		{
			question: "Perché Alfio dice 'a voi e a tutto il vostro parentado'?",
			options: ["È una minaccia estesa all'onore di tutta la famiglia", "Vuole invitare tutti a cena", "Sta scherzando", "Si riferisce ai muli"],
			correctAnswer: "È una minaccia estesa all'onore di tutta la famiglia",
			explanation: "L'offesa dell'adulterio colpisce l'intero clan familiare, e la vendetta minaccia tutti."
		},

		// --- VERGA: LA LUPA (Psicologia e Simboli) ---
		{
			question: "Qual è la reazione delle altre donne del villaggio al passaggio della Lupa?",
			options: ["Si fanno il segno della croce", "La salutano con rispetto", "Le chiedono consigli", "La ignorano"],
			correctAnswer: "Si fanno il segno della croce",
			explanation: "La vedono come un'incarnazione del diavolo o di una maledizione, qualcosa di non umano."
		},
		{
			question: "Perché Padre Angiolino, il 'servo di Dio', è citato nel testo?",
			options: ["Per mostrare che anche i santi perdevano l'anima per lei", "Perché la confessa", "Perché la sposa con Nanni", "Perché la scaccia"],
			correctAnswer: "Per mostrare che anche i santi perdevano l'anima per lei",
			explanation: "Verga sottolinea la potenza sessuale della Lupa: nemmeno un uomo di chiesa riusciva a resistere al suo fascino."
		},
		{
			question: "Cosa stava facendo la Lupa quando si innamorò di Nanni?",
			options: ["Mieteva il fieno nelle chiuse", "Andava a messa", "Cucinava", "Lavava i panni"],
			correctAnswer: "Mieteva il fieno nelle chiuse",
			explanation: "L'innamoramento avviene nel contesto del lavoro duro nei campi, sotto il sole caldo."
		},
		{
			question: "Quale frase usa Nanni per cercare di allontanare la Lupa nell'aia?",
			options: ["Non ne va in volta femmina buona nell'ora fra vespero e nona!", "Vattene vecchia pazza!", "Chiamo la polizia!", "Non ti voglio più!"],
			correctAnswer: "Non ne va in volta femmina buona nell'ora fra vespero e nona!",
			explanation: "Nanni cita la tradizione popolare che associa quelle ore al demonio o alle streghe per farla ragionare."
		},
		{
			question: "Cosa fa la Lupa dopo essere stata minacciata dal brigadiere?",
			options: ["Torna a tentare Nanni dicendo 'la casa è mia'", "Scappa in montagna", "Si uccide", "Chiede perdono"],
			correctAnswer: "Torna a tentare Nanni dicendo 'la casa è mia'",
			explanation: "Non cede all'autorità. Usa il diritto di proprietà sulla casa per rimanere vicino a Nanni."
		},

		// --- PASCOLI (Gelsomino, Assiuolo, Italy) ---
		{
			question: "Cosa sono le 'farfalle crepuscolari' nel Gelsomino Notturno?",
			options: ["Farfalle che appaiono al tramonto", "Fantasmi", "Le stelle", "I sogni"],
			correctAnswer: "Farfalle che appaiono al tramonto",
			explanation: "È un'immagine naturalistica precisa che segna l'inizio della notte."
		},
		{
			question: "Nel Gelsomino Notturno, cosa fa l'ape tardiva?",
			options: ["Sussurra trovando le celle già prese", "Punge il poeta", "Muore di freddo", "Dorme sul fiore"],
			correctAnswer: "Sussurra trovando le celle già prese",
			explanation: "Simboleggia il ritardo, l'esclusione (forse del poeta stesso) che arriva quando gli altri hanno già trovato il loro posto."
		},
		{
			question: "Ne 'L'assiuolo', come viene descritto il cielo all'inizio?",
			options: ["Notava in un'alba di perla", "Era nero come la pece", "Era rosso fuoco", "Era pieno di stelle cadenti"],
			correctAnswer: "Notava in un'alba di perla",
			explanation: "Un'immagine cromatica delicata e indistinta, tipica del Simbolismo."
		},
		{
			question: "Cosa sono i 'sistri d'argento' ne L'assiuolo?",
			options: ["Il rumore delle cavallette", "Strumenti musicali egizi veri", "Campane lontane", "Monete che cadono"],
			correctAnswer: "Il rumore delle cavallette",
			explanation: "È una metafora preziosa: il frinire delle cavallette ricorda il suono dei sistri (strumenti sacri usati nel culto di Iside per la resurrezione).",
		},
		{
			question: "In 'Italy', cosa fa la piccola Maria?",
			options: ["Tossisce ed è malata", "Gioca felice", "Mangia molto", "Canta canzoni italiane"],
			correctAnswer: "Tossisce ed è malata",
			explanation: "La bambina rappresenta la fragilità degli emigranti, tornata in Italia per cercare salute (tisi/tubercolosi)."
		},
		{
			question: "Chi è Ghita in 'Italy'?",
			options: ["Una donna che tesse", "La madre di Maria", "La nonna", "Una vicina"],
			correctAnswer: "Una donna che tesse",
			explanation: "Nel testo si legge 'La Ghita e Beppe di Taddeo', figure del mondo contadino lucchese."
		},

		// --- D'ANNUNZIO E WILDE ---
		{
			question: "Nella 'Pioggia nel pineto', quali strumenti suonano la 'musica' della pioggia?",
			options: ["Le diverse piante (mirto, pino, ginepro) che fanno suoni diversi", "Violini e flauti", "Uccelli che cantano", "Il mare in lontananza"],
			correctAnswer: "Le diverse piante (mirto, pino, ginepro) che fanno suoni diversi",
			explanation: "Ogni pianta risponde alla pioggia con un timbro sonoro diverso, come strumenti di un'orchestra."
		},
		{
			question: "Cosa significa 'favola bella che ieri t'illuse, che oggi m'illude'?",
			options: ["L'amore come illusione dolce e ingannevole", "Una storia per bambini", "La pioggia", "L'estate"],
			correctAnswer: "L'amore come illusione dolce e ingannevole",
			explanation: "L'amore è visto come una magnifica illusione che avvolge i due amanti a turno."
		},
		{
			question: "Quale animale viene citato nella 'Pioggia nel pineto' oltre alle cicale?",
			options: ["La rana (figlia del limo lontana)", "Il lupo", "L'aquila", "Il serpente"],
			correctAnswer: "La rana (figlia del limo lontana)",
			explanation: "La rana canta 'nell'ombra più fonda', aggiungendo una nota bassa alla sinfonia della pioggia."
		},
		{
			question: "Secondo la prefazione di Wilde, chi è il critico?",
			options: ["Colui che può tradurre in diversa forma la sua impressione delle cose belle", "Colui che giudica la morale", "Un nemico dell'arte", "Un fallito"],
			correctAnswer: "Colui che può tradurre in diversa forma la sua impressione delle cose belle",
			explanation: "La critica è essa stessa una forma di creazione basata sull'impressione personale."
		},
		{
			question: "Cosa dice Salomé degli occhi di Iokanaan?",
			options: ["Sono terribili, colmi di collera e sprezzo", "Sono dolci come il miele", "Sono chiusi per sempre", "Sono blu come il mare"],
			correctAnswer: "Sono terribili, colmi di collera e sprezzo",
			explanation: "Anche da morto, lo sguardo del profeta sembra giudicarla, ma lei vuole costringerlo a guardarla."
		},

		// --- AVANGUARDIE (Marinetti, Aleramo) ---
		{
			question: "Quale verbo deve essere usato secondo il Manifesto Tecnico Futurista?",
			options: ["Il verbo all'infinito", "Il condizionale", "L'imperativo", "Il passato remoto"],
			correctAnswer: "Il verbo all'infinito",
			explanation: "L'infinito dà il senso della continuità della vita e dell'intuizione, senza essere limitato da una persona (io/tu)."
		},
		{
			question: "Marinetti propone di sostituire la punteggiatura con cosa?",
			options: ["Segni matematici (+ - X =)", "Disegni", "Spazi vuoti", "Numeri"],
			correctAnswer: "Segni matematici (+ - X =)",
			explanation: "Per indicare i movimenti e la velocità, meglio usare simboli matematici o musicali."
		},
		{
			question: "Cosa pensa Marinetti dei professori e degli archeologi?",
			options: ["Sono una 'fetida cancrena' da cui liberare l'Italia", "Sono utili per la cultura", "Vanno rispettati", "Sono il futuro"],
			correctAnswer: "Sono una 'fetida cancrena' da cui liberare l'Italia",
			explanation: "Il Futurismo odia violentemente tutto ciò che è accademico, vecchio e statico."
		},
		{
			question: "In 'Una Donna', cosa rappresenta la 'madre' nella tradizione italiana?",
			options: ["Una figura mistica e sacrificale", "Una donna di potere", "Una lavoratrice", "Una nemica"],
			correctAnswer: "Una figura mistica e sacrificale",
			explanation: "Aleramo critica proprio questo mito della madre che si annulla per la famiglia, considerandolo dannoso."
		},

		// --- GUERRA (Lussu, Comisso, Ungaretti) ---
		{
			question: "Cosa fa il generale di Lussu quando è in trincea?",
			options: ["Sale su un mucchio di sassi per farsi vedere dal nemico", "Si nasconde", "Spara con la mitragliatrice", "Piange"],
			correctAnswer: "Sale su un mucchio di sassi per farsi vedere dal nemico",
			explanation: "Un atto di incoscienza arrogante: vuole mostrare coraggio ma espone inutilmente se stesso e gli altri al fuoco."
		},
		{
			question: "Quando il caporale muore per proteggere il generale, cosa commenta quest'ultimo?",
			options: ["È un eroe, un vero eroe", "Che stupido", "Poveretto", "Non dice nulla"],
			correctAnswer: "È un eroe, un vero eroe",
			explanation: "Il generale trasforma una morte inutile causata dalla sua imprudenza in retorica eroica."
		},
		{
			question: "Nel brano di Comisso, cosa c'è scritto sul cartello nel postribolo?",
			options: ["Il coito sia breve", "Benvenuti soldati", "Vietato l'ingresso agli ufficiali", "Viva l'Italia"],
			correctAnswer: "Il coito sia breve",
			explanation: "Un dettaglio agghiacciante che mostra come anche l'amore fosse meccanizzato e disumanizzato dalla guerra."
		},
		{
			question: "Come appaiono i soldati che escono dal postribolo in Comisso?",
			options: ["Confusi, come se avessero fatto qualcosa di proibito", "Felici e trionfanti", "Arrabbiati", "Ubriachi"],
			correctAnswer: "Confusi, come se avessero fatto qualcosa di proibito",
			explanation: "L'esperienza è squallida e veloce, lasciandoli più vuoti di prima."
		},
		{
			question: "In 'Veglia', Ungaretti si trova:",
			options: ["Cima Quattro", "Sul Carso generico", "A Caporetto", "In ospedale"],
			correctAnswer: "Cima Quattro",
			explanation: "La poesia è datata e localizzata con precisione: 'Cima Quattro il 23 dicembre 1915'."
		},

		// --- PIRANDELLO (Belluca, Avvocato) ---
		{
			question: "Come viene definita la vita di Belluca prima della ribellione?",
			options: ["Impossibile", "Tranquilla", "Ricca", "Divertente"],
			correctAnswer: "Impossibile",
			explanation: "Il narratore stesso dice: 'nessuno sa bene come quest'uomo ha vissuto finora... una vita impossibile'."
		},
		{
			question: "Chi vive a casa con Belluca?",
			options: ["Tre donne cieche (moglie, suocera, sorella della suocera) e figlie vedove con nipoti", "Vive da solo", "Solo la moglie", "I genitori anziani"],
			correctAnswer: "Tre donne cieche (moglie, suocera, sorella della suocera) e figlie vedove con nipoti",
			explanation: "Un inferno domestico grottesco e sovraffollato che giustifica il suo esaurimento."
		},
		{
			question: "Come descrive Pirandello gli occhi di Belluca dopo l'epifania?",
			options: ["Gli ridevano lucidissimi, come quelli d'un bambino", "Erano pieni di lacrime", "Erano chiusi", "Erano rossi di rabbia"],
			correctAnswer: "Gli ridevano lucidissimi, come quelli d'un bambino",
			explanation: "Il segno della 'follia' è in realtà la riconquista della purezza e della vita."
		},
		{
			question: "Cosa teme l'avvocato ne 'La Carriola' se venisse scoperto?",
			options: ["Sarebbe un uomo finito, deriso e portato in manicomio", "Sua moglie lo lascerebbe", "Il cane lo morderebbe", "Perderebbe i clienti"],
			correctAnswer: "Sarebbe un uomo finito, deriso e portato in manicomio",
			explanation: "La società non tollera che un uomo 'serio' compia atti insensati; crollerebbe tutta la sua reputazione."
		},
		{
			question: "Che sentimento prova la cagnetta mentre fa la carriola?",
			options: ["Terrore, lo guarda con occhi sbarrati", "Divertimento", "Affetto", "Rabbia"],
			correctAnswer: "Terrore, lo guarda con occhi sbarrati",
			explanation: "Anche l'animale capisce che c'è qualcosa di 'terribile' e innaturale nel comportamento del padrone."
		},

		// --- CONFRONTI E GENERALI ---
		{
			question: "Quale differenza c'è tra la morte in Verga e in D'Annunzio?",
			options: ["In Verga è brutale e tragica, in D'Annunzio è una fusione estetica con la natura", "Sono uguali", "D'Annunzio non parla di morte", "Verga è romantico"],
			correctAnswer: "In Verga è brutale e tragica, in D'Annunzio è una fusione estetica con la natura",
			explanation: "Verga mostra il sangue e la polvere (Turiddu); D'Annunzio sublima la fine (o la perdita dell'umanità) in bellezza vegetale."
		},
		{
			question: "Chi rappresenta l'opposto del 'Superuomo' dannunziano?",
			options: ["L'inetto o l'uomo imprigionato di Pirandello (es. Belluca)", "Marinetti", "La Lupa", "Turiddu"],
			correctAnswer: "L'inetto o l'uomo imprigionato di Pirandello (es. Belluca)",
			explanation: "Mentre D'Annunzio vuole dominare la vita, i personaggi di Pirandello ne sono schiacciati."
		},
		{
			question: "Quale autore usa termini medici/scientifici per descrivere la condizione umana?",
			options: ["Pirandello (frenesia, encefalite)", "Pascoli", "Ungaretti", "Verga"],
			correctAnswer: "Pirandello (frenesia, encefalite)",
			explanation: "Ne 'Il treno ha fischiato', i colleghi usano termini medici per etichettare la 'pazzia' di Belluca."
		},
		{
			question: "Sia Pascoli che Ungaretti usano versi brevi. Qual è la differenza?",
			options: ["Pascoli cerca la musicalità e il simbolo, Ungaretti l'essenzialità assoluta e il dolore", "Nessuna", "Ungaretti usa le rime, Pascoli no", "Pascoli è futurista"],
			correctAnswer: "Pascoli cerca la musicalità e il simbolo, Ungaretti l'essenzialità assoluta e il dolore",
			explanation: "Pascoli è impressionista e musicale (fonosimbolismo); Ungaretti è espressionista e scarno."
		}
	];

        /* ================================================================= */
        /* LOGICA APPLICAZIONE (NON TOCCARE QUESTA PARTE) */
        /* ================================================================= */

        class ScrollytellingApp {
            constructor(content) {
                this.content = content;
                this.lastScrollY = 0;
                this.isDragging = false;
                this.scrubTargetIndex = 0;
                this.isSnapEnabled = localStorage.getItem('snapEnabled') !== 'false'; 
                this.currentChapterIndex = 0;
                this.isSnapping = false; 
                
                this.initDOMElements();
                this.initEventListeners();
                this.initTheme();
                this.initSnapState();
                
                this.setMode(localStorage.getItem('template-mode') || 'study');
                this.dom.appContainer.classList.add('loaded');
            }
            
            initDOMElements() {
                this.dom = {
                    appContainer: document.getElementById('app'), header: document.getElementById('header'),
                    headerTitle: document.getElementById('header-title'), 
                    timelineNodesMobile: document.getElementById('timeline-nodes-mobile'),
                    timelineProgressMobile: document.getElementById('timeline-progress-mobile'),
                    timelineTrackMobile: document.getElementById('timeline-track-mobile'),
                    timelineNodesDesktop: document.getElementById('timeline-nodes-desktop'),
                    timelineProgressDesktop: document.getElementById('timeline-progress-desktop'),
                    timelineDesktopContainer: document.querySelector('.timeline-desktop-container'),
                    storyPanel: document.getElementById('story-panel'),
                    themeSwitcher: document.querySelector('.theme-switcher'),
                    scrollSentinel: document.getElementById('scroll-sentinel'),
                    modeBtns: document.querySelectorAll('.mode-btn'),
                    appFooter: document.getElementById('app-footer'),
                    autoScrollBtn: document.getElementById('autoscroll-btn'),
                    prevChapterBtn: document.getElementById('prev-chapter-btn'),
                    nextChapterBtn: document.getElementById('next-chapter-btn')
                };
            }
            
            initSnapState() {
                if (this.isSnapEnabled) {
                    document.documentElement.classList.add('snap-enabled');
                    this.dom.autoScrollBtn.classList.add('active');
                }
            }

            initTheme() {
                const savedTheme = localStorage.getItem('theme') || 'light'; 
                this.applyTheme(savedTheme);
                this.dom.themeSwitcher.addEventListener('click', () => {
                    if (navigator.vibrate) navigator.vibrate(20);
                    const newTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                    this.applyTheme(newTheme);
                });
            }
            
            applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            }
            
            initEventListeners() {
                if ('scrollRestoration' in history) { history.scrollRestoration = 'manual'; }
                window.scrollTo(0, 0);

                this.dom.modeBtns.forEach(btn => {
                    btn.addEventListener('click', () => {
                        if (navigator.vibrate) navigator.vibrate(20);
                        const newMode = btn.dataset.mode;
                        this.setMode(newMode);
                    });
                });
                
                this.dom.autoScrollBtn.addEventListener('click', () => {
                     this.isSnapEnabled = !this.isSnapEnabled;
                     localStorage.setItem('snapEnabled', this.isSnapEnabled);
                     document.documentElement.classList.toggle('snap-enabled');
                     this.dom.autoScrollBtn.classList.toggle('active');
                     if (navigator.vibrate) navigator.vibrate(10);
                     
                     if(this.isSnapEnabled) {
                         this.dom.header.classList.remove('hidden');
                         this.dom.appFooter.classList.remove('hidden');
                     }
                });

                this.dom.prevChapterBtn.addEventListener('click', () => {
                    if (this.currentChapterIndex > 0) {
                        this.scrollToChapter(this.content.chapters[this.currentChapterIndex - 1].id);
                    }
                });

                this.dom.nextChapterBtn.addEventListener('click', () => {
                    if (this.currentChapterIndex < this.content.chapters.length - 1) {
                        this.scrollToChapter(this.content.chapters[this.currentChapterIndex + 1].id);
                    }
                });

                window.addEventListener('scroll', () => this.handleScroll(), { passive: true });
                window.addEventListener('resize', () => this.handleResize());
                this.initDraggableTimeline();
            }
            
            handleScroll() {
                const currentScrollY = window.scrollY;
                const isMobile = window.innerWidth < 960;

                // Header Logic: Always allow hiding/showing
                if (Math.abs(currentScrollY - this.lastScrollY) > 5) {
                    if (currentScrollY > this.lastScrollY && currentScrollY > 80) {
                        this.dom.header.classList.add('hidden');
                        this.dom.appFooter.classList.add('hidden');
                    } else {
                        this.dom.header.classList.remove('hidden');
                        this.dom.appFooter.classList.remove('hidden');
                    }
                }
                
                // Custom JS Snap Logic
                if (this.isSnapEnabled && !isMobile && !this.isSnapping) {
                    this.checkSnapTrigger();
                }

                this.lastScrollY = currentScrollY;
            }

            checkSnapTrigger() {
                const chapters = document.querySelectorAll('.story-chapter');
                const viewportHeight = window.innerHeight;
                const triggerPoint = viewportHeight / 1.5; 
                
                chapters.forEach((chapter, index) => {
                    const rect = chapter.getBoundingClientRect();
                    
                    if (rect.bottom < triggerPoint && rect.bottom > 0 && index < chapters.length - 1) {
                        this.isSnapping = true;
                        const nextChapterId = chapters[index + 1].id;
                        this.scrollToChapter(nextChapterId);
                        
                        setTimeout(() => {
                            this.isSnapping = false;
                        }, 1000);
                    }
                });
            }
            
            handleResize() {
                document.querySelectorAll('.acc-item.open .acc-body').forEach(body => {
                    body.style.maxHeight = body.scrollHeight + "px";
                });
                if(this.dom.timelineNodesDesktop.offsetHeight > 0) {
                    this.setupDesktopTimelineSVG();
                }
            }
            
            initDraggableTimeline() {
                const timeline = this.dom.timelineTrackMobile;
                const handleDrag = (e) => {
                    if (!this.isDragging) return;
                    e.preventDefault();
                    const clientX = e.clientX || e.touches[0].clientX;
                    const rect = timeline.getBoundingClientRect();
                    let progress = (clientX - rect.left) / rect.width;
                    progress = Math.max(0, Math.min(1, progress));
                    
                    this.scrubTargetIndex = Math.round(progress * (this.content.chapters.length - 1));
                    this.dom.headerTitle.textContent = this.content.chapters[this.scrubTargetIndex].title;
                    
                    document.querySelectorAll('.timeline-node-point').forEach((node, index) => {
                        node.classList.toggle('active', index === this.scrubTargetIndex);
                    });
                    this.dom.timelineProgressMobile.style.width = `${progress * 100}%`;
                };
                const startDrag = (e) => {
                    this.isDragging = true;
                    handleDrag(e);
                };
                const endDrag = () => {
                    if (!this.isDragging) return;
                    this.isDragging = false;
                    this.scrollToChapter(this.content.chapters[this.scrubTargetIndex].id);
                };
                timeline.addEventListener('mousedown', startDrag);
                window.addEventListener('mousemove', handleDrag);
                window.addEventListener('mouseup', endDrag);
                timeline.addEventListener('touchstart', startDrag, { passive: false });
                window.addEventListener('touchmove', handleDrag, { passive: false });
                window.addEventListener('touchend', endDrag);
            }
            
            setMode(mode) {
                localStorage.setItem('template-mode', mode);
                this.dom.modeBtns.forEach(b => b.classList.toggle('active', b.dataset.mode === mode));
                const currentScrollRatio = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight);
                this.buildUI(mode);
                this.initObservers(); 
                const newScrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                window.scrollTo(0, newScrollHeight * currentScrollRatio);
            }
            
            buildUI(mode) {
                document.querySelector('.header-title').textContent = this.content.title;

                this.dom.storyPanel.innerHTML = '';
                this.dom.timelineNodesMobile.innerHTML = '';
                this.dom.timelineNodesDesktop.innerHTML = '';
                
                this.content.chapters.forEach(chapter => {
                    const nodePointMobile = document.createElement('button');
                    nodePointMobile.className = 'timeline-node-point';
                    nodePointMobile.dataset.targetId = chapter.id;
                    nodePointMobile.setAttribute('aria-label', `Vai al capitolo: ${chapter.title}`);
                    nodePointMobile.onclick = (e) => {
                        if(navigator.vibrate) navigator.vibrate(10);
                        this.scrollToChapter(chapter.id);
                    };
                    this.dom.timelineNodesMobile.appendChild(nodePointMobile);

                    const nodeDesktop = document.createElement('button');
                    nodeDesktop.className = 'timeline-desktop-node';
                    nodeDesktop.dataset.targetId = chapter.id;
                    nodeDesktop.innerHTML = `<div class="node-point"></div><div class="node-label">${chapter.title}</div>`;
                    nodeDesktop.onclick = () => this.scrollToChapter(chapter.id);
                    this.dom.timelineNodesDesktop.appendChild(nodeDesktop);

                    const section = document.createElement('section');
                    section.className = 'story-chapter';
                    section.id = chapter.id;
                    const content = mode === 'story' ? chapter.storyDescription : chapter.description;
                    section.innerHTML = `<div class="chapter-content"><h2 class="chapter-title">${chapter.title}</h2><div class="chapter-body">${content}</div></div>`;
                    this.dom.storyPanel.appendChild(section);
                });
                
                this.dom.storyPanel.querySelectorAll('.masked-term').forEach(term => {
                    term.addEventListener('click', () => {
                        if(!term.classList.contains('revealed')) {
                            term.classList.add('revealed');
                            if (navigator.vibrate) navigator.vibrate(10);
                        }
                    });
                });

                this.dom.storyPanel.querySelectorAll('.acc-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const item = header.parentElement;
                        const body = header.nextElementSibling;
                        const isOpen = item.classList.contains('open');
                        item.classList.toggle('open');
                        if (!isOpen) {
                            body.style.maxHeight = body.scrollHeight + "px";
                        } else {
                            body.style.maxHeight = null;
                        }
                    });
                });

                this.dom.storyPanel.querySelectorAll('.flip-container').forEach(container => {
                    container.addEventListener('click', () => {
                         const selection = window.getSelection();
                         if (selection.toString().length === 0) {
                             container.classList.toggle('flipped');
                         }
                    });
                });
                
                this.setupDesktopTimelineSVG();
            }
            
            setupDesktopTimelineSVG() {
                const nodesHeight = this.dom.timelineNodesDesktop.offsetHeight;
                const containerHeight = this.dom.timelineDesktopContainer.offsetHeight;
                const startY = (containerHeight - nodesHeight) / 2;
                const endY = startY + nodesHeight;

                const line = this.dom.timelineProgressDesktop.previousElementSibling;
                line.setAttribute('y1', startY);
                line.setAttribute('y2', endY);
                
                const progressLine = this.dom.timelineProgressDesktop;
                progressLine.setAttribute('y1', startY);
                progressLine.setAttribute('y2', endY);

                const pathLength = endY - startY;
                progressLine.style.strokeDasharray = pathLength;
                progressLine.style.strokeDashoffset = pathLength;
            }

            scrollToChapter(id) {
                const targetElement = document.getElementById(id);
                const headerOffset = 80;
                const elementPosition = targetElement.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
            }
            
            updateNavButtonsState() {
                if (this.currentChapterIndex <= 0) {
                    this.dom.prevChapterBtn.classList.add('disabled');
                } else {
                    this.dom.prevChapterBtn.classList.remove('disabled');
                }

                if (this.currentChapterIndex >= this.content.chapters.length - 1) {
                    this.dom.nextChapterBtn.classList.add('disabled');
                } else {
                    this.dom.nextChapterBtn.classList.remove('disabled');
                }
            }

            initObservers() {
                const chapterObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        const id = entry.target.id;
                        const chapterIndex = this.content.chapters.findIndex(c => c.id === id);
                        entry.target.classList.toggle('active', entry.isIntersecting);

                        if (entry.isIntersecting) {
                            this.currentChapterIndex = chapterIndex;
                            this.updateNavButtonsState();

                            if (!this.isDragging) {
                                this.dom.headerTitle.textContent = this.content.chapters[chapterIndex].title;
                            }
                            document.querySelectorAll(`[data-target-id]`).forEach(node => {
                                const isCurrent = node.dataset.targetId === id;
                                const nodeIndex = this.content.chapters.findIndex(c => c.id === node.dataset.targetId);
                                node.classList.toggle('active', isCurrent);
                                node.classList.toggle('past', nodeIndex < chapterIndex);
                            });
                            
                            const progress = (chapterIndex / (this.content.chapters.length - 1)) * 100;
                            this.dom.timelineProgressMobile.style.width = `${progress}%`;

                            const desktopLine = this.dom.timelineProgressDesktop;
                            if (desktopLine) {
                                const pathLength = parseFloat(desktopLine.style.strokeDasharray) || 0;
                                const progressFraction = chapterIndex / (this.content.chapters.length - 1);
                                desktopLine.style.strokeDashoffset = pathLength * (1 - progressFraction);
                            }
                        }
                    });
                }, { rootMargin: "-40% 0px -50% 0px", threshold: 0 });
                
                document.querySelectorAll('.story-chapter').forEach(chapter => chapterObserver.observe(chapter));

                const headerObserver = new IntersectionObserver(([entry]) => {
                    this.dom.header.classList.toggle('scrolled', !entry.isIntersecting);
                }, { threshold: [1] });
                
                headerObserver.observe(this.dom.scrollSentinel);
            }
        }
        
        class Quiz {
            constructor(questions) {
                this.allQuestions = questions;
                this.dom = {
                    overlay: document.getElementById('quiz-overlay'),
                    container: document.getElementById('quiz-container'),
                };
                this.state = {};
                this.localStorageKey = 'templateQuizState';
                this.wasSnapEnabled = false; 
                this.savedScrollPosition = 0; 
            }
            start() {
                if(navigator.vibrate) navigator.vibrate(20);
                const savedState = this.loadState();
                if (savedState) { this.renderResumePrompt(); } 
                else { this.beginNewQuiz(); }
            }
            resume() {
                if(navigator.vibrate) navigator.vibrate(20);
                this.state = this.loadState();
                this.openOverlay();
                this.startQuizUI();
                this.renderQuestion();
            }
            beginNewQuiz() {
                if(navigator.vibrate) navigator.vibrate(20);
                this.state = {
                    questions: this.shuffleArray([...this.allQuestions]),
                    currentQuestionIndex: 0,
                    score: 0,
                    answered: false,
                };
                this.saveState();
                this.openOverlay();
                this.renderIntro();
            }
            openOverlay() {
                this.savedScrollPosition = window.scrollY;
                if (document.documentElement.classList.contains('snap-enabled')) {
                    this.wasSnapEnabled = true;
                    document.documentElement.classList.remove('snap-enabled');
                } else {
                    this.wasSnapEnabled = false;
                }
                this.dom.overlay.classList.add('visible');
                document.body.classList.add('no-scroll');
            }
            close() {
                if(navigator.vibrate) navigator.vibrate(20);
                this.dom.overlay.classList.remove('visible');
                document.body.classList.remove('no-scroll');
                if (this.wasSnapEnabled) {
                    document.documentElement.classList.add('snap-enabled');
                }
                window.scrollTo(0, this.savedScrollPosition);
            }
            saveState() { localStorage.setItem(this.localStorageKey, JSON.stringify(this.state)); }
            loadState() { const saved = localStorage.getItem(this.localStorageKey); return saved ? JSON.parse(saved) : null; }
            clearState() { localStorage.removeItem(this.localStorageKey); }
            
            renderResumePrompt() {
                this.openOverlay();
                this.dom.container.innerHTML = `<div class="quiz-header"><span class="quiz-title">Quiz in Sospeso</span><button class="icon-btn quiz-close-btn" id="quiz-close-resume"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><div class="quiz-body"><div class="quiz-results-wrapper"><h2 class="quiz-results-title">Bentornato!</h2><p class="quiz-results-text">Hai un quiz in sospeso. Vuoi continuare da dove avevi interrotto?</p><div class="quiz-results-actions"><button class="quiz-next-btn" id="resume-quiz-btn">Riprendi Quiz</button><button class="quiz-next-btn secondary" id="restart-quiz-btn">Inizia da Capo</button></div></div></div>`;
                document.getElementById('resume-quiz-btn').onclick = () => this.resume();
                document.getElementById('restart-quiz-btn').onclick = () => { this.clearState(); this.beginNewQuiz(); };
                document.getElementById('quiz-close-resume').onclick = () => this.close();
            }
            renderIntro() {
                 this.dom.container.innerHTML = `<div class="quiz-header"><span class="quiz-title">Test di Autovalutazione</span><button class="icon-btn quiz-close-btn" id="quiz-close-intro"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><div class="quiz-body"><div class="quiz-results-wrapper"><h2 class="quiz-results-title">Sei pronto?</h2><p class="quiz-results-text">Verifica la tua preparazione con ${this.state.questions.length} domande.</p><button class="quiz-next-btn" id="start-quiz-btn">Inizia il Quiz</button></div></div>`;
                 document.getElementById('start-quiz-btn').onclick = () => { this.startQuizUI(); this.renderQuestion(); };
                 document.getElementById('quiz-close-intro').onclick = () => this.close();
            }
            startQuizUI() {
                if(navigator.vibrate) navigator.vibrate(20);
                this.dom.container.innerHTML = `<div class="quiz-header"><span class="quiz-title" id="quiz-progress-text"></span><button class="icon-btn quiz-close-btn" id="quiz-close-main"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><div class="quiz-body"><div id="quiz-content-wrapper"></div></div><div class="quiz-footer"><button class="quiz-next-btn" id="quiz-next-btn" disabled>Avanti</button></div>`;
                document.getElementById('quiz-next-btn').onclick = () => this.nextQuestion();
                document.getElementById('quiz-close-main').onclick = () => this.close();
            }
            renderQuestion() {
                this.state.answered = false;
                const question = this.state.questions[this.state.currentQuestionIndex];
                const progressText = `Domanda ${this.state.currentQuestionIndex + 1} di ${this.state.questions.length}`;
                document.getElementById('quiz-progress-text').textContent = progressText;
                const answersHtml = this.shuffleArray(question.options).map(option => `<button class="quiz-answer-btn" data-answer="${option}">${option}</button>`).join('');
                const contentWrapper = document.getElementById('quiz-content-wrapper');
                const oldSlide = contentWrapper.querySelector('.quiz-slide');
                if (oldSlide) {
                    oldSlide.style.opacity = 0;
                    setTimeout(() => {
                        oldSlide.innerHTML = `<p class="quiz-question-text">${question.question}</p><div class="quiz-answers">${answersHtml}</div><div class="quiz-explanation"></div>`;
                        oldSlide.style.opacity = 1;
                        this.addAnswerListeners();
                    }, 200);
                } else {
                    contentWrapper.innerHTML = `<div class="quiz-slide active"><p class="quiz-question-text">${question.question}</p><div class="quiz-answers">${answersHtml}</div><div class="quiz-explanation"></div></div>`;
                    this.addAnswerListeners();
                }
                document.getElementById('quiz-next-btn').disabled = true;
            }
            addAnswerListeners() {
                document.querySelectorAll('.quiz-answer-btn').forEach(btn => {
                    btn.onclick = (e) => this.handleAnswer(e.target);
                });
            }
            handleAnswer(selectedButton) {
                if (this.state.answered) return;
                this.state.answered = true;
                if(navigator.vibrate) navigator.vibrate(20);
                const selectedAnswer = selectedButton.dataset.answer;
                const currentQ = this.state.questions[this.state.currentQuestionIndex];
                const correctAnswer = currentQ.correctAnswer;
                
                if (selectedAnswer === correctAnswer) {
                    this.state.score++;
                    selectedButton.classList.add('correct');
                } else {
                    selectedButton.classList.add('incorrect');
                    const correctBtn = Array.from(document.querySelectorAll('.quiz-answer-btn')).find(btn => btn.dataset.answer === correctAnswer);
                    if (correctBtn) correctBtn.classList.add('correct');
                }
                
                document.querySelectorAll('.quiz-answer-btn').forEach(btn => btn.classList.add('disabled'));
                document.getElementById('quiz-next-btn').disabled = false;
                
                const explanationEl = document.querySelector('.quiz-explanation');
                if(explanationEl) {
                    const explText = currentQ.explanation || ("La risposta corretta è: " + correctAnswer);
                    explanationEl.innerHTML = "<strong>Spiegazione:</strong> " + explText;
                    explanationEl.classList.add('visible');
                }
                
                this.saveState();
            }
            nextQuestion() {
                if(navigator.vibrate) navigator.vibrate(20);
                this.state.currentQuestionIndex++;
                if (this.state.currentQuestionIndex < this.state.questions.length) {
                    this.saveState();
                    this.renderQuestion();
                } else {
                    this.renderResults();
                }
            }
            renderResults() {
                const score = this.state.score;
                const total = this.state.questions.length;
                const percentage = Math.round((score / total) * 100);
                let message = "Puoi fare di meglio. Riprova!";
                if (percentage >= 70) message = "Ottimo lavoro!";
                if (percentage >= 90) message = "Eccellente!";
                this.clearState();
                this.dom.container.innerHTML = `<div class="quiz-header"><span class="quiz-title">Risultati</span></div><div class="quiz-body"><div class="quiz-results-wrapper"><h2 class="quiz-results-title">${message}</h2><div class="quiz-results-score">${score} / ${total}</div><p class="quiz-results-text">Hai risposto correttamente al ${percentage}% delle domande.</p><div class="quiz-results-actions"><button class="quiz-next-btn" id="retake-quiz-btn">Riprova il Quiz</button><button class="quiz-next-btn secondary" id="close-results-btn">Torna allo Studio</button></div></div></div>`;
                document.getElementById('retake-quiz-btn').onclick = () => this.beginNewQuiz();
                document.getElementById('close-results-btn').onclick = () => this.close();
            }
            shuffleArray(array) {
                return array.map(value => ({ value, sort: Math.random() })).sort((a, b) => a.sort - b.sort).map(({ value }) => value);
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            const app = new ScrollytellingApp(learningContent);
            const quiz = new Quiz(quizData);
            document.getElementById('quiz-btn').onclick = () => quiz.start();
        });
    </script>
</body>
</html>
